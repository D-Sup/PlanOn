# í”Œëœì˜¨

<br/>

ğŸ“± [ì•± ì´ìš©í•´ë³´ê¸°](https://plan-on.vercel.app) 
> í…ŒìŠ¤íŠ¸ ê³„ì •  
> ID : `test@email.com`  
> PW : `test123`

<br/>

## ì•±ì†Œê°œ

![Intro](https://github.com/D-Sup/PlanOn/assets/96939334/e3b4c16f-89ec-4345-9986-13085aed65e7)

> í”Œëœì˜¨(Plan-On)ì€ ìì‹ ë§Œì˜ ì¼ì •ì„ ê´€ë¦¬í•˜ê³ , ì¼ì •ì— ëŒ€í•œ ì´ì•¼ê¸°ë¥¼ ê³µìœ í•  ìˆ˜ ìˆëŠ” í”Œë«í¼ì…ë‹ˆë‹¤.
> í”Œëœì˜¨ê³¼ í•¨ê»˜ ë‹¹ì‹ ì˜ í•˜ë£¨ë¥¼ ê³„íší•˜ê³ , ê³µìœ í•´ë³´ì„¸ìš”!

<br/>

í”Œëœì˜¨ì—ì„œëŠ”,

1. êµ¬ê¸€ ë° ê¹ƒí—ˆë¸Œ ì†Œì…œ ë¡œê·¸ì¸ì„ í†µí•´ ê°„í¸í•˜ê²Œ ì´ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
2. ì¼ì •ì„ ì§œê³  ì§€ë„ë¥¼ í†µí•´ ë™ì„ ì„ ì•ˆë‚´ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
3. ì¼ì • ì™„ë£Œ í›„ ê´€ë ¨ ìŠ¤í† ë¦¬ë¥¼ ê²Œì‹œí•˜ê³  ê³µìœ  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
4. í•„ìš”í•œ ì¥ì†Œ ì •ë³´ë¥¼ ì§€ë„ì—ì„œ ì‰½ê²Œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
5. ë§ˆìŒì— ë“œëŠ” ìœ ì €ë¥¼ íŒ”ë¡œìš°í•˜ê±°ë‚˜ í•„í„° ê¸°ëŠ¥ì„ í†µí•´ ì›í•˜ëŠ” ìŠ¤í† ë¦¬ë¥¼ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
6. ë‹¤ë¥¸ ìœ ì €ì™€ ì‹¤ì‹œê°„ ì±„íŒ…ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
7. ë‹¤ë¥¸ ìœ ì €ì™€ ì›í™œí•œ ì†Œí†µì„ ìœ„í•´ í‘¸ì‹œ ì•Œë¦¼ì„ ì§€ì›í•©ë‹ˆë‹¤.
8. PWA(Progressive Web App) ê¸°ìˆ ì„ ì‚¬ìš©í•˜ì—¬ ë‹¤ì–‘í•œ í™˜ê²½ì—ì„œ ì›í™œí•˜ê²Œ ì´ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br/>

## ê°œë°œ ì¼ì •

![Schedule](https://github.com/D-Sup/PlanOn/assets/96939334/921ea484-ad17-414e-b7a3-728edaab2fb7)

<br/>

## ê°œë°œ í™˜ê²½

<table>
<tr>
 <td align="center" width="200px">ì‚¬ìš© ê¸°ìˆ </td>
 <td width="800px">
  <img src="https://img.shields.io/badge/typescript-3178c6?style=for-the-badge&logo=typescript&logoColor=white"/>&nbsp  
  <img src="https://img.shields.io/badge/React-61DAFB?style=for-the-badge&logo=React&logoColor=white"/>&nbsp  
  <img src="https://img.shields.io/badge/recoil-3578E5?style=for-the-badge&logo=recoil&logoColor=white"/>&nbsp 
  <img src="https://img.shields.io/badge/reactquery-FF4154?style=for-the-badge&logo=reactquery&logoColor=white"/>&nbsp
  <img src="https://img.shields.io/badge/React%20Router-CA4245?style=for-the-badge&logo=ReactRouter&logoColor=white"/>&nbsp 
  <img src="https://img.shields.io/badge/tailwindcss-06B6D4?style=for-the-badge&logo=tailwindcss&logoColor=white"/>&nbsp 
  <img src="https://img.shields.io/badge/shadcnui-000000?style=for-the-badge&logo=shadcnui&logoColor=white"/>&nbsp 
  <img src="https://img.shields.io/badge/pwa-5A0FC8?style=for-the-badge&logo=pwa&logoColor=white"/>&nbsp 
  </td>
</tr>
<tr>
  <td align="center">ë°±ì—”ë“œ ì„œë¹„ìŠ¤</td>
  <td>
    <img src="https://img.shields.io/badge/firebase-DD2C00?style=for-the-badge&logo=firebase&logoColor=ffffff"/>&nbsp 
    <img src="https://img.shields.io/badge/awslambda-FF9900?style=for-the-badge&logo=awslambda&logoColor=ffffff"/>&nbsp 
    <img src="https://img.shields.io/badge/amazonapigateway-FF4F8B?style=for-the-badge&logo=amazonapigateway&logoColor=ffffff"/>&nbsp 
  </td>
</tr>
<tr>
  <td align="center">API</td>
  <td>
    <img src="https://img.shields.io/badge/googlemaps-4285F4?style=for-the-badge&logo=googlemaps&logoColor=ffffff"/>&nbsp 
  </td>
</tr>
<tr>
 <td align="center">íŒ¨í‚¤ì§€</td>
 <td>
    <img src="https://img.shields.io/badge/npm-CB3837?style=for-the-badge&logo=NPM&logoColor=ffffff"/>&nbsp 
  </td>
</tr>
<tr>
 <td align="center">í¬ë§·í„°</td>
 <td>
 <img src="https://img.shields.io/badge/eslint-4B32C3?style=for-the-badge&logo=eslint&logoColor=white"/>
 </td>
</tr>
<tr>
  <td align="center">ë¹Œë“œ</td>
  <td>
    <img src="https://img.shields.io/badge/vite-646CFF?style=for-the-badge&logo=vite&logoColor=white"/>&nbsp 
  </td>
</tr>
 <tr>
  <td align="center">ë°°í¬</td>
  <td>
    <img src="https://img.shields.io/badge/vercel-000000?style=for-the-badge&logo=vercel&logoColor=white"/>&nbsp 
  </td>
</tr>
</table>

<br/>

## ì•„í‚¤í…ì²˜

![Architecture](https://github.com/D-Sup/PlanOn/assets/96939334/a9c0023b-3ea6-443f-b2eb-5078b2f64444)

<br/>

## ì•± ì‚´í´ë³´ê¸°

### ì´ˆê¸°í™”ë©´
---
|ì•±ì„¤ì¹˜|ìŠ¤í”Œë˜ì‹œ|
|---|---|
|<img width="243" src="https://github.com/D-Sup/PlanOn/assets/96939334/dfd0b0d3-647c-4c32-8899-50e426f1a9a8" />|<img width="243" src="https://github.com/D-Sup/PlanOn/assets/96939334/406e8d36-bcba-426d-ac2d-7ba9452bec15" />|

### íšŒì›ê°€ì… í˜ì´ì§€
---
|ì´ë©”ì¼ íšŒì›ê°€ì…|êµ¬ê¸€ íšŒì›ê°€ì…|ê¹ƒí—ˆë¸Œ íšŒì›ê°€ì…|
|---|---|---|
|<img width="243" src="https://github.com/D-Sup/PlanOn/assets/96939334/f0e5adea-7a9a-464f-b906-0b7783dbf617" />|<img width="243" src="https://github.com/D-Sup/PlanOn/assets/96939334/2abd025e-121b-474e-95b1-2f698e7d8d9c" />|<img width="243" src="https://github.com/D-Sup/PlanOn/assets/96939334/477d3229-78e4-4f53-b706-b4b9197c317f" />|

### ë¡œê·¸ì¸ í˜ì´ì§€
---
|ì´ë©”ì¼ ë¡œê·¸ì¸|êµ¬ê¸€ ë¡œê·¸ì¸|ê¹ƒí—ˆë¸Œ ë¡œê·¸ì¸|
|---|---|---|
|<img width="243" src="https://github.com/D-Sup/PlanOn/assets/96939334/06a22e0a-5e5b-42bb-8adb-22b5bf54ae57" />|<img width="243" src="https://github.com/D-Sup/PlanOn/assets/96939334/5189e784-ab41-4913-b601-8430d707893f" />|<img width="243" src="https://github.com/D-Sup/PlanOn/assets/96939334/4f4fd4e2-90bb-4701-8764-e0b24485b8a5" />|

### ìŠ¤í† ë¦¬ í˜ì´ì§€
---
|ì•± ì†Œê°œ|ìŠ¤í† ë¦¬|ìƒí˜¸ì‘ìš©|
|---|---|---|
|<img width="243" src="https://github.com/D-Sup/PlanOn/assets/96939334/b5cab56a-4340-449f-be0b-fed457669e22" />|<img width="243" src="https://github.com/D-Sup/PlanOn/assets/96939334/ec6f68c3-0023-498e-81fb-7666db942845" />|<img width="243" src="https://github.com/D-Sup/PlanOn/assets/96939334/3c87c7c6-b94f-4f23-9d89-4e8abbd7125e" />|

|í•„í„°|ê²€ìƒ‰|
|---|---|
|<img width="243" src="https://github.com/D-Sup/PlanOn/assets/96939334/b550d6be-9b9d-40a2-a9fa-e1b0e1a0e82e" />|<img width="243" src="https://github.com/D-Sup/PlanOn/assets/96939334/97a11718-e724-4066-8757-12b4cba85bf5" />|

|ìŠ¤í† ë¦¬ ì¶”ê°€|ìŠ¤í† ë¦¬ ìˆ˜ì •|ìŠ¤í† ë¦¬ ì‚­ì œ|
|---|---|---|
|<img width="243" src="https://github.com/D-Sup/PlanOn/assets/96939334/630d7148-d7cc-43c1-bed2-f18390d1b071" />|<img width="243" src="https://github.com/D-Sup/PlanOn/assets/96939334/a19da998-c765-49dc-951d-f7e32b5d39a2" />|<img width="243" src="https://github.com/D-Sup/PlanOn/assets/96939334/41327f9d-2fac-4b4c-a086-3c0be771f84d" />|

### ì¼ì • í˜ì´ì§€
---
|ì¼ì •|ì¼ì • ì¶”ê°€|
|---|---|
|<img width="243" src="https://github.com/D-Sup/PlanOn/assets/96939334/84508114-e77c-4ba7-80ab-c2a4bafcf800" />|<img width="243" src="https://github.com/D-Sup/PlanOn/assets/96939334/cc9b6d9f-9c14-4a09-927c-0b7d82e0e002" />|

|ì¼ì • ìˆ˜ì •|ì¼ì • ì‚­ì œ|
|---|---|
|<img width="243" src="https://github.com/D-Sup/PlanOn/assets/96939334/f30f9912-0157-4a1e-827c-f8dc65d48e03" />|<img width="243" src="https://github.com/D-Sup/PlanOn/assets/96939334/5d4969e4-5e2f-4c0a-996f-6139217bb7ae" />|

### ë§µë·° í˜ì´ì§€
---
|ë§µ|ìœ„ì¹˜ ìƒì„¸ë³´ê¸°|
|---|---|
|<img width="243" src="https://github.com/D-Sup/PlanOn/assets/96939334/6184a7c4-9e6a-4ce0-87aa-4a806bd10a3b" />|<img width="243" src="https://github.com/D-Sup/PlanOn/assets/96939334/ec538bc5-f2be-4686-a5b7-3c1381e7f720" />|

### ì±„íŒ… í˜ì´ì§€
---
|ì±„íŒ…|ìƒí˜¸ì‘ìš©|ì±„íŒ…ë°© ë‚˜ê°€ê¸°|
|---|---|---|
|<img width="243" src="https://github.com/D-Sup/PlanOn/assets/96939334/ad5e696a-63d3-46a3-a66c-287e371e3dd5" />|<img width="243" src="https://github.com/D-Sup/PlanOn/assets/96939334/7061ba40-ea2e-4998-b0e5-63bb2a50e71f" />|<img width="243" src="https://github.com/D-Sup/PlanOn/assets/96939334/fbffbe7a-bebe-406c-87ef-756c5780965a" />|

### í”„ë¡œí•„ í˜ì´ì§€
---
|íŒ”ë¡œì‰|í”„ë¡œí•„ í¸ì§‘|
|---|---|
|<img width="243" src="https://github.com/D-Sup/PlanOn/assets/96939334/fd6eebd9-e266-4fa3-9445-42be4463c5ea" />|<img width="243" src="https://github.com/D-Sup/PlanOn/assets/96939334/7d22e233-fe2a-4b9e-8223-80c6a51fefa3" />|

### ì„¤ì • í˜ì´ì§€
---
|ë‹¤í¬ëª¨ë“œ|ì•Œë¦¼ì„¤ì •|ì ê¸ˆì„¤ì •|
|---|---|---|
|<img width="243" src="https://github.com/D-Sup/PlanOn/assets/96939334/5dd65cb8-cfef-43b7-a6ee-54c78d793f5b" />|<img width="243" src="https://github.com/D-Sup/PlanOn/assets/96939334/ca8153a8-2503-4b7e-b110-8a505df6eeef" />|<img width="243" src="https://github.com/D-Sup/PlanOn/assets/96939334/b0125ca3-5f8f-47fc-84dd-462869452537" />|

|í°íŠ¸ì„¤ì •|ë¬¸ì˜í•˜ê¸°|ë¡œê·¸ì•„ì›ƒ/ê³„ì •íƒˆí‡´|
|---|---|---|
|<img width="243" src="https://github.com/D-Sup/PlanOn/assets/96939334/ac2c47fb-d087-4fd6-a29e-9f269aa9ea54" />|<img width="243" src="https://github.com/D-Sup/PlanOn/assets/96939334/86728929-ec84-40c2-a76e-eb9b856d9d3e" />|<img width="243" src="https://github.com/D-Sup/PlanOn/assets/96939334/00ff8eb9-5663-43ab-a515-abf429bd10fb" />|

### í‘¸ì‹œ ì•Œë¦¼
---
|ì•Œë¦¼ ì „ì†¡|ë°±ê·¸ë¼ìš´ë“œ ì•Œë¦¼|í¬ê·¸ë¼ìš´ë“œ ì•Œë¦¼|
|---|---|---|
|<img width="243" src="https://github.com/D-Sup/PlanOn/assets/96939334/697a1178-ee97-4404-adef-93733fe60768" />|<img width="243" src="https://github.com/D-Sup/PlanOn/assets/96939334/61f73e98-4f04-429a-85d0-0dfbd01d5648" />|<img width="243" src="https://github.com/D-Sup/PlanOn/assets/96939334/0780a716-6590-4929-88b7-6bb58411d13f" />|

|ë°±ê·¸ë¼ìš´ë“œ ë”¥ë§í¬|í¬ê·¸ë¼ìš´ë“œ ë”¥ë§í¬|
|---|---|
|<img width="243" src="https://github.com/D-Sup/PlanOn/assets/96939334/88da9958-00c4-4c2d-be99-335db6e18354" />|<img width="243" src="https://github.com/D-Sup/PlanOn/assets/96939334/54d0750b-c7a3-490a-a424-531d62678dba" />|

### ë§í¬ ê³µìœ 
---
|ìŠ¤í† ë¦¬ ê³µìœ |ì¼ì • ê³µìœ |ìœ„ì¹˜ ê³µìœ |
|---|---|---|
|<img width="243" src="https://github.com/D-Sup/PlanOn/assets/96939334/0bc4bad1-29d8-41d0-b848-d6f0e7b13f98" />|<img width="243" src="https://github.com/D-Sup/PlanOn/assets/96939334/5b7a9d49-3f10-4efc-a0c3-af38ed6455ca" />|<img width="243" src="https://github.com/D-Sup/PlanOn/assets/96939334/a1d9201b-0e67-4706-abdb-7d3d35e16ee1" />|

<br/>

## êµ¬í˜„ ê³¼ì • ì†Œê°œ

### ì•„í† ë¯¹ ë””ìì¸ íŒ¨í„´ ì ìš©

> `Why?`  
>
> ì•„í† ë¯¹ ë””ìì¸ íŒ¨í„´ì´ ì œê³µí•˜ëŠ” ì»´í¬ë„ŒíŠ¸ì˜ ëª…í™•í•œ ë¶„ë¥˜ ì²´ê³„ì™€ ì¬ì‚¬ìš© ê°€ëŠ¥ì„±ì€   
> 1ì¸ ê°œë°œ í™˜ê²½ì—ì„œ í° ì´ì ìœ¼ë¡œ ì‘ìš©í•  ê²ƒì´ë¼ ìƒê°í–ˆìŠµë‹ˆë‹¤.   
>
> íŒ€ í”„ë¡œì íŠ¸ì˜ ê²½ìš°, ê° ì»´í¬ë„ŒíŠ¸ë¥¼ ì–´ë–»ê²Œ ë¶„ë¥˜í• ì§€ ëª¨í˜¸í•˜ê³  ë…¼ì˜í•  ì—¬ì§€ê°€ ë§ì§€ë§Œ   
> 1ì¸ ê°œë°œì—ì„œëŠ” ì´ëŸ¬í•œ ê¸°ì¤€ì„ ì‰½ê²Œ í™•ë¦½í•  ìˆ˜ ìˆê³    
> ì´ë¥¼ í†µí•´ ë””ìì¸ ê³¼ì •ì—ì„œ ìì—°ìŠ¤ëŸ½ê²Œ ì»´í¬ë„ŒíŠ¸ ì¬í™œìš©ì„±ì„ ë†’ì´ëŠ” êµ¬ì¡°ë¡œ ì„¤ê³„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.   
>
> ë˜í•œ, ì‘ì€ ë‹¨ìœ„ì˜ ì»´í¬ë„ŒíŠ¸ë¶€í„° ìƒìœ„ ë ˆë²¨ì˜ ì»´í¬ë„ŒíŠ¸ë¥¼ ì„¤ê³„í•´ë³´ë©´ì„œ   
> ì»´í¬ë„ŒíŠ¸ì— ëŒ€í•œ ê°œë…ì„±ì„ ë†’ì¼ ìˆ˜ ìˆëŠ” ê¸°íšŒë¼ê³  ì—¬ê²¼ìŠµë‹ˆë‹¤.

> `How?`  
>
> ì•„í† ë¯¹ ë””ìì¸ì—ì„œëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ atom, molecule, organism, template, pageì˜ 5ê°€ì§€ ë ˆë²¨ë¡œ ë‚˜ëˆ„ëŠ”ë°,  
> ê° ë ˆë²¨ì— ëŒ€í•´ ë‚˜ëˆ„ëŠ” ê¸°ì¤€ì„ ì•„ë˜ì™€ ê°™ì´ ì •ì˜í•˜ì—¬ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í–ˆìŠµë‹ˆë‹¤.

```
â”œâ”€â”€ ğŸ“‚components
  â”œâ”€â”€ ğŸ“atoms
  â”œâ”€â”€ ğŸ“molecules
  â”œâ”€â”€ ğŸ“organisms
  â”œâ”€â”€ ğŸ“pages
  ...
```

`atom`
- ë” ì´ìƒ ë¶„í•´í•  ìˆ˜ ì—†ëŠ” ì»´í¬ë„ŒíŠ¸
- ë‹¨ì¼ì ìœ¼ë¡œ ì‚¬ìš©í•˜ê¸° ì–´ë ¤ìš´ ì»´í¬ë„ŒíŠ¸
- molecule í˜¹ì€ organism ë‹¨ìœ„ì—ì„œ ìœ ìš©í•˜ê²Œ ì‚¬ìš©ë  ìˆ˜ ìˆëŠ” ì›ì†Œ ë‹¨ìœ„ì˜ ì»´í¬ë„ŒíŠ¸

`molecule`
- atom, moleculeìœ¼ë¡œ êµ¬ì„±í•  ìˆ˜ ìˆëŠ” ì»´í¬ë„ŒíŠ¸
- ë²„íŠ¼ ê·¸ë£¹ì´ë‚˜ ì…ë ¥ í•„ë“œì™€ ë ˆì´ë¸”ì„ í¬í•¨í•˜ëŠ” í¼ ìš”ì†Œ ë“±ê³¼ ê°™ì´ í•œ ê°€ì§€ ì—­í• ì„ ëª…í™•í•˜ê²Œ ìˆ˜í–‰í•˜ëŠ” ì»´í¬ë„ŒíŠ¸
- ì»¨í…ìŠ¤íŠ¸ ì—†ì´ ë‹¨ìˆœíˆ UIë¥¼ êµ¬ì„±í•˜ëŠ” ì‘ì€ ë‹¨ìœ„ì˜ ì»´í¬ë„ŒíŠ¸

`organism`
- atom, molecule, organismìœ¼ë¡œ êµ¬ì„±í•  ìˆ˜ ìˆëŠ” ì»´í¬ë„ŒíŠ¸
- atomê³¼ moleculeì— ë¹„í•´ ë” êµ¬ì²´ì ìœ¼ë¡œ í‘œí˜„ëœ ì»´í¬ë„ŒíŠ¸
- íŠ¹ì • ì»¨í…ìŠ¤íŠ¸ë¥¼ ê°€ì§€ëŠ” ì»´í¬ë„ŒíŠ¸
- ë…ë¦½ì„±ì´ ë†’ì€ ì»´í¬ë„ŒíŠ¸
- ì¬ì‚¬ìš©ì„±ì€ ë‚®ì€ ì»´í¬ë„ŒíŠ¸

`template`
- pageì—ì„œ ë°ì´í„° ê²°í•©ì„ ì œê±°í•˜ì—¬ layoutê³¼ ë¹„ìŠ·í•œ ì—­í• ì„ í•˜ëŠ” ì»´í¬ë„ŒíŠ¸
- í”„ë¡œì íŠ¸ì— í¬í•¨ë˜ëŠ” ê° í˜ì´ì§€ëŠ” ë…ë¦½ì ì´ê³  ì„œë¡œ ë‹¤ë¥¸ ë ˆì´ì•„ì›ƒ ìŠ¤íƒ€ì¼ì„ ê°€ì¡Œê¸° ë•Œë¬¸ì— 
template ë ˆë²¨ì˜ ì´ì ì„ ì¶©ë¶„íˆ í™œìš©í•  ìˆ˜ ì—†ë‹¤ê³  íŒë‹¨í•˜ì—¬ í•´ë‹¹ ë ˆë²¨ì„ ìƒëµí–ˆìŠµë‹ˆë‹¤.

`page`
- molecule, organismìœ¼ë¡œ êµ¬ì„±í•  ìˆ˜ ìˆëŠ” ì»´í¬ë„ŒíŠ¸
- ì»´í¬ë„ŒíŠ¸ë¥¼ ë ˆì´ì•„ì›ƒì— ë°°ì¹˜í•˜ì—¬ ì‹¤ì œ ì½˜í…ì¸ ë¥¼ ë‹´ê³  ìˆëŠ” 
í˜ì´ì§€ ë‹¨ìœ„ì˜ ì»´í¬ë„ŒíŠ¸

---

<br/>

### DB ê³„ì¸µ êµ¬ì¡°ë¥¼ ê³ ë ¤í•œ CRUD ì„¤ê³„

> `Why?`
> 
> FireStoreëŠ” Firebaseì—ì„œ ì§€ì›í•˜ëŠ” NoSQL ë°ì´í„°ë² ì´ìŠ¤ ì„œë¹„ìŠ¤ë¡œ,  
> collection, document, fieldë¼ëŠ” ê³„ì¸µ êµ¬ì¡°ë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.  
> FireStoreëŠ” ì´ëŸ¬í•œ ê³„ì¸µ êµ¬ì¡°ì—ì„œ ë°ì´í„°ë¥¼ ì¶”ê°€, ì½ê¸°, ì—…ë°ì´íŠ¸, ì‚­ì œí•˜ëŠ” ì‘ì—…ì´ ë°˜ë³µì ìœ¼ë¡œ ìˆ˜í–‰ë˜ê¸° ë§ˆë ¨ì…ë‹ˆë‹¤.  
> ì´ë¡œ ì¸í•´, ë¹„ìŠ·í•œ ì½”ë“œ íŒ¨í„´ì´ ì—¬ëŸ¬ ê³³ì—ì„œ ë°˜ë³µë˜ë©´ì„œ ì½”ë“œì˜ ì¤‘ë³µì„±ì´ ì¦ê°€í•  ìˆ˜ ìˆë‹¤ê³  íŒë‹¨í–ˆìŠµë‹ˆë‹¤.   

> `How?`
>
> FireStoreì™€ì˜ ìœ ì—°í•œ í†µì‹ ì„ ì§€ì›í•˜ëŠ” CRUD(Create, Read, Update, Delete) í›…ì„ êµ¬í˜„í•˜ê³ , ê° ê¸°ëŠ¥ì— ë§ê²Œ í™œìš©í–ˆìŠµë‹ˆë‹¤.
> 
> > ğŸ’¡ `useFirestoreCreate`
> >
> > FireStoreì˜ addDoc, setDoc, updateDoc ë©”ì„œë“œë¥¼ í™œìš©í•˜ì—¬  
> > ìƒˆë¡œìš´ ë¬¸ì„œ ìƒì„±, íŠ¹ì • IDë¡œ ë¬¸ì„œ ìƒì„±, ë°°ì—´ í•„ë“œì— ë°ì´í„° ì¶”ê°€, ê°ì²´ í•„ë“œì— ë°ì´í„° ì¶”ê°€, ì„œë¸Œì»¬ë ‰ì…˜ì— ë°ì´í„° ìƒì„± ë“±ì˜ ê¸°ëŠ¥ì„ ì œê³µí•˜ë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

<details>
  <summary>ì½”ë“œë³´ê¸°</summary>

- `createDocument` - ìƒˆë¡œìš´ ë¬¸ì„œ ìƒì„±  
addDoc ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒˆë¡œìš´ ë¬¸ì„œë¥¼ ì»¬ë ‰ì…˜ì— ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- `createDocumentManual` - íŠ¹ì • IDë¡œ ë¬¸ì„œ ìƒì„±  
setDoc ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ íŠ¹ì • IDë¥¼ ê°€ì§„ ë¬¸ì„œë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- `createFieldArray` - ë°°ì—´ í•„ë“œì— ë°ì´í„° ì¶”ê°€    
updateDoc ë©”ì„œë“œì™€ arrayUnion ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ë°°ì—´ í•„ë“œì— ë°ì´í„°ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- `createFieldObject` - ê°ì²´ í•„ë“œì— ë°ì´í„° ì¶”ê°€  
updateDoc ë©”ì„œë“œì™€ arrayUnion ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ê°ì²´ í˜•íƒœì˜ ë°ì´í„°ë¥¼ ë°°ì—´ í•„ë“œì— ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- `createSubcollection` - ì„œë¸Œì»¬ë ‰ì…˜ì— ë°ì´í„° ìƒì„±  
ì„œë¸Œì»¬ë ‰ì…˜ ê²½ë¡œë¥¼ ì§€ì •í•˜ê³  addDoc ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```tsx
import { appFireStore, timestamp } from "../firebase/config";
import { collection, doc, setDoc, addDoc, updateDoc, arrayUnion } from "firebase/firestore";

import getAccountId from "@/utils/getAccountId";

import { DataModelType, ModelValue } from "@/types/dataModel.type";

const useFirestoreCreate = (collectionName: string) => {

  const accountId = getAccountId()
  const createdAt = timestamp.fromDate(new Date());

  const createDocument = async (data: DataModelType): Promise<undefined | string> => {
    try {
      if (accountId) {
        const docRef = await addDoc(collection(appFireStore, collectionName),
          {
            ...data,
            authorizationId: accountId,
            createdAt
          });
        console.log("ë°ì´í„°ê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤:", docRef.id);
        return docRef.id
      } else {
        console.error("í† í°ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤");
      }
    } catch (error) {
      console.error("ë°ì´í„° ìƒì„±ì„ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤:", error);
      throw error;
    }
  }

  const createDocumentManual = async (documentId: string, data: DataModelType): Promise<undefined | string> => {
    try {
      if (accountId) {
        const docRef = doc(appFireStore, collectionName, documentId);
        await setDoc(docRef, {
          ...data,
          authorizationId: accountId,
          createdAt
        });
        console.log("ë°ì´í„°ê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤:", docRef.id);
        return docRef.id;
      } else {
        console.error("í† í°ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤");
      }
    } catch (error) {
      console.error("ë°ì´í„° ìƒì„±ì„ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤:", error);
      throw error;
    }
  }

  const createFieldArray = async (documentId: string, fieldName: string, data: ModelValue): Promise<undefined | string> => {
    try {
      if (accountId) {
        const docRef = doc(appFireStore, collectionName, documentId);
        await updateDoc(docRef, {
          [fieldName]: arrayUnion(data)
        });
        console.log("ë°ì´í„°ê°€ ì„±ê³µì ìœ¼ë¡œ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤", docRef.id);
        return docRef.id;
      } else {
        console.error("í† í°ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤");
      }
    } catch (error) {
      console.error("ë°ì´í„° ìƒì„±ì„ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤:", error);
      throw error;
    }
  }

  const createFieldObject = async (documentId: string, fieldName: string, data: DataModelType): Promise<undefined | string> => {
    try {
      if (accountId) {
        const docRef = doc(appFireStore, collectionName, documentId);
        const createData = {
          [fieldName]: arrayUnion({ ...data, createdAt })
        };
        await updateDoc(docRef, createData);
        console.log("ë°ì´í„°ê°€ ì„±ê³µì ìœ¼ë¡œ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤", docRef.id);
        return docRef.id;
      } else {
        console.error("í† í°ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤");
      }
    } catch (error) {
      console.error("ë°ì´í„° ìƒì„±ì„ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤:", error);
      throw error;
    }
  }

  const createSubcollection = async (documentId: string, subcollectionName: string, data: DataModelType): Promise<undefined | string> => {
    try {
      if (accountId) {
        const subcollectionRef = collection(appFireStore, `${collectionName}/${documentId}/${subcollectionName}`);
        const subDocRef = await addDoc(subcollectionRef, {
          ...data,
          createdAt
        });
        console.log("ì„œë¸Œì»¬ë ‰ì…˜ ë‚´ ë¬¸ì„œê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤:", subDocRef.id);
        return subDocRef.id;
      } else {
        console.error("í† í°ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤");
      }
    } catch (error) {
      console.error("ì„œë¸Œì»¬ë ‰ì…˜ ë‚´ ë¬¸ì„œ ìƒì„±ì„ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤:", error);
      throw error;
    }
  }

  return { createDocument, createDocumentManual, createFieldArray, createFieldObject, createSubcollection };
}

export default useFirestoreCreate;
```

</details>

> > ğŸ’¡ `useFirestoreRead`
> >
> > FireStoreì˜ getDoc, getDocs, query, where, limit, startAfter ë©”ì„œë“œë¥¼ í™œìš©í•˜ì—¬  
> > íŠ¹ì • ë¬¸ì„œ ì½ê¸°, ì¡°ê±´ë¶€ ì¿¼ë¦¬ ì½ê¸°, íŠ¹ì • ì„œë¸Œì»¬ë ‰ì…˜ ì½ê¸° ë“±ì˜ ê¸°ëŠ¥ì„ ì œê³µí•˜ë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

<details>
  <summary>ì½”ë“œë³´ê¸°</summary>

- `readDocumentSingle` - íŠ¹ì • ë¬¸ì„œ ì½ê¸°  
getDoc ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ íŠ¹ì • ë¬¸ì„œë¥¼ ì½ì–´ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- `readDocumentAll` - ëª¨ë“  ë¬¸ì„œ ì½ê¸°  
getDoc ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ íŠ¹ì • ë¬¸ì„œë¥¼ ì½ì–´ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- `readDocumentsSimplePaged` - ì¡°ê±´ë¶€ ì¿¼ë¦¬ ë° ì •ë ¬ì„ í†µí•œ ë¬¸ì„œ í˜ì´ì§€ë„¤ì´ì…˜  
limitê³¼ startAfter ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì¡°ê±´ í•„í„°ë§ ë° ì •ë ¬ëœ ë¬¸ì„œë¥¼ í˜ì´ì§€ ë‹¨ìœ„ë¡œ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- `readDocumentsPaged` - ì •ë ¬ì„ í†µí•œ ë¬¸ì„œ í˜ì´ì§€ë„¤ì´ì…˜  
limitê³¼ startAfter ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì •ë ¬ëœ ë¬¸ì„œë¥¼ í˜ì´ì§€ ë‹¨ìœ„ë¡œ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- `readDocumentQuery` - ì¡°ê±´ë¶€ ì¿¼ë¦¬ ì½ê¸°  
queryì™€ where ë©”ì„œë“œë¥¼ ê²°í•©í•˜ì—¬ ì¡°ê±´ì— ë§ëŠ” ë¬¸ì„œë¥¼ ì½ì–´ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- `readSubCollection` - íŠ¹ì • ì„œë¸Œì»¬ë ‰ì…˜ ë‚´ ì¡°ê±´ë¶€ ì¿¼ë¦¬ ì½ê¸°  
ì„œë¸Œì»¬ë ‰ì…˜ ê²½ë¡œë¥¼ ì§€ì •í•˜ê³ , queryì™€ where ë©”ì„œë“œë¥¼ í™œìš©í•˜ì—¬ ì¡°ê±´ì— ë§ëŠ” ì„œë¸Œì»¬ë ‰ì…˜ ë‚´ì˜ ë¬¸ì„œë¥¼ ì½ì–´ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```tsx
import { appFireStore } from "../firebase/config";
import {
  collection,
  query,
  orderBy,
  where,
  getDocs,
  doc,
  getDoc,
  startAfter,
  limit,
  OrderByDirection,
  QueryConstraint,
  WhereFilterOp,
  DocumentData,
  Timestamp
} from "firebase/firestore";
import useModalStack from "./useModalStack";

export interface ReadDocumentType<T> {
  id: string;
  data: T;
}

const useFirestoreRead = (collectionName: string) => {

  const { openModal } = useModalStack()

  const readDocumentSingle = async <T>(documentId: string): Promise<undefined | ReadDocumentType<T>> => {
    try {
      const docRef = doc(appFireStore, collectionName, documentId);
      const docSnapshot = await getDoc(docRef);
      const result = { id: docSnapshot.id, data: docSnapshot.data() as T };
      return result;
    } catch (error) {
      console.error("ë°ì´í„° ì¡°íšŒë¥¼ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤:", error);
      throw error;
    }
  };

  const readDocumentAll = async <T>(sortFieldName?: string, sortOrder: OrderByDirection = "desc"): Promise<undefined | ReadDocumentType<T>[]> => {
    try {
      const collectionRef = collection(appFireStore, collectionName);
      const querySnapshot =
        sortFieldName !== undefined && sortOrder !== undefined ?
          await getDocs(query(collectionRef, orderBy(sortFieldName, sortOrder))) :
          await getDocs(collectionRef)
      const result = querySnapshot.docs.map((doc) => ({
        id: doc.id,
        data: doc.data() as T
      }));
      return result;
    } catch (error) {
      console.error("ë°ì´í„° ì¡°íšŒë¥¼ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤:", error);
      throw error;
    }
  };

  const readDocumentsSimplePaged = async <T>(
    data: ReadDocumentType<T>[],
    fieldName: string,
    whereOperator: WhereFilterOp,
    filterValues: string[],
    sortFieldName: string,
    sortOrder: OrderByDirection = "desc",
    includePrivate: boolean,
    pageSize: number = 1,
    handleFunc?: (data: DocumentData | boolean) => void,
    lastVisible?: null | DocumentData,
    isDataEnd?: boolean
  ): Promise<undefined | ReadDocumentType<T>[]> => {
    try {
      if (isDataEnd && lastVisible) {
        openModal("Toast", { type: "info", message: "ë°ì´í„°ë¥¼ ëª¨ë‘ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤." });
        return data;
      }
      const collectionRef = collection(appFireStore, collectionName);
      const documents: ReadDocumentType<T>[] = data;
      if (fieldName === "id") {
        const docRefs = filterValues.map(id => doc(collectionRef, id));
        const documentSnapshots = await Promise.all(docRefs.map(docRef => getDoc(docRef)));
        documentSnapshots.forEach(doc => {
          if (doc.exists()) {
            documents.push({ id: doc.id, data: doc.data() as T });
          }
        });
        documents.sort((a, b) => {
          const aSeconds = (a.data as Record<string, Timestamp>)[sortFieldName].seconds;
          const bSeconds = (b.data as Record<string, Timestamp>)[sortFieldName].seconds;

          if (sortOrder === "asc") {
            return aSeconds - bSeconds;
          } else {
            return bSeconds - aSeconds;
          }
        });
      } else {
        let q;
        if (!includePrivate) {
          if (lastVisible) {
            q = query(
              collectionRef,
              where(fieldName, whereOperator, filterValues.length === 0 ? [""] : filterValues),
              where("private", "==", false),
              orderBy(sortFieldName, sortOrder),
              startAfter(lastVisible),
              limit(pageSize)
            );
          } else {
            q = query(
              collectionRef,
              where(fieldName, whereOperator, filterValues.length === 0 ? [""] : filterValues),
              where("private", "==", false),
              orderBy(sortFieldName, sortOrder),
              limit(pageSize)
            );
          }
        } else {
          if (lastVisible) {
            q = query(
              collectionRef,
              where(fieldName, whereOperator, filterValues.length === 0 ? [""] : filterValues),
              orderBy(sortFieldName, sortOrder),
              startAfter(lastVisible),
              limit(pageSize)
            );
          } else {
            q = query(
              collectionRef,
              where(fieldName, whereOperator, filterValues.length === 0 ? [""] : filterValues),
              orderBy(sortFieldName, sortOrder),
              limit(pageSize)
            );
          }
        }

        const documentSnapshots = await getDocs(q);

        documentSnapshots.forEach((doc) => {
          documents.push({ id: doc.id, data: doc.data() as T });
        });

        if (documentSnapshots.size < pageSize) {
          isDataEnd = true;
          lastVisible && pageSize !== Infinity && openModal("Toast", { type: "info", message: "ë°ì´í„°ë¥¼ ëª¨ë‘ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤." });
        }

        if (documentSnapshots.size > 0) {
          handleFunc && handleFunc(documentSnapshots.docs[documentSnapshots.docs.length - 1]);
        } else {
          handleFunc && handleFunc(true);
        }
      }
      return documents;
    } catch (error) {
      console.error("ë°ì´í„° ì¡°íšŒë¥¼ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤:", error);
      throw error;
    }
  };

  const readDocumentsPaged = async <T>(
    data: ReadDocumentType<T>[],
    sortFieldName: string,
    sortOrder: OrderByDirection = "desc",
    pageSize: number = 1,
    handleFunc: (data: DocumentData | boolean) => void,
    lastVisible: null | DocumentData,
    isDataEnd: boolean
  ): Promise<undefined | ReadDocumentType<T>[]> => {
    try {
      if (isDataEnd) {
        openModal("Toast", { type: "info", message: "ë°ì´í„°ë¥¼ ëª¨ë‘ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤." });
        return data;
      }
      const collectionRef = collection(appFireStore, collectionName);
      let q;
      if (lastVisible) {
        q = query(
          collectionRef,
          where("private", "==", false),
          orderBy(sortFieldName, sortOrder),
          startAfter(lastVisible),
          limit(pageSize)
        );
      } else {
        q = query(
          collectionRef,
          where("private", "==", false),
          orderBy(sortFieldName, sortOrder),
          limit(pageSize)
        );
      }
      const documentSnapshots = await getDocs(q);
      const lastDocs = documentSnapshots.docs[documentSnapshots.docs.length - 1];

      if (lastDocs) {
        handleFunc(lastDocs);
      } else {
        openModal("Toast", { type: "info", message: "ë°ì´í„°ë¥¼ ëª¨ë‘ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤." });
        handleFunc(true);
      }
      const documents: ReadDocumentType<T>[] = data;
      documentSnapshots.forEach(doc => {
        documents.push({ id: doc.id, data: doc.data() as T });
      });
      return documents;
    } catch (error) {
      console.error("ë°ì´í„° ì¡°íšŒë¥¼ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤:", error);
      throw error;
    }
  };


  const readDocumentQuery = async <T>(fieldName: string, operator: WhereFilterOp, value: string | string[]): Promise<undefined | ReadDocumentType<T>[]> => {
    try {
      const q = query(
        collection(appFireStore, collectionName),
        where(fieldName, operator, value)
      );
      const querySnapshot = await getDocs(q);
      const result = querySnapshot.docs.map((doc) => ({
        id: doc.id,
        data: doc.data() as T,
      }));
      return result;
    } catch (error) {
      console.error("ë°ì´í„° ì¡°íšŒë¥¼ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤:", error);
      throw error;
    }
  };

  const readSubCollection = async <T>(
    documentId: string,
    subCollectionName: string,
    whereFieldName?: string,
    whereOperator?: WhereFilterOp,
    whereValue?: string | null
  ): Promise<undefined | ReadDocumentType<T>[]> => {
    try {
      const subCollectionRef = collection(appFireStore, collectionName, documentId, subCollectionName);
      const queryConstraints: QueryConstraint[] = [];

      if (whereFieldName) {
        queryConstraints.push(where(whereFieldName, whereOperator, whereValue));
      }

      const q = query(subCollectionRef, ...queryConstraints);
      const querySnapshot = await getDocs(q);

      const result = querySnapshot.docs.map((doc) => ({
        id: doc.id,
        data: doc.data() as T,
      }));

      return result;
    } catch (error) {
      console.error("ì„œë¸Œ ì»¬ë ‰ì…˜ ë°ì´í„° ì¡°íšŒë¥¼ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤:", error);
      throw error;
    }
  };

  return { readDocumentSingle, readDocumentAll, readDocumentsSimplePaged, readDocumentsPaged, readDocumentQuery, readSubCollection };
};

export default useFirestoreRead;
```

</details>

> > ğŸ’¡ `useFirestoreUpdate`
> >
> > FireStoreì˜ updateDoc ë©”ì„œë“œë¥¼ í™œìš©í•˜ì—¬  
> > ë¬¸ì„œ ì—…ë°ì´íŠ¸, íŠ¹ì • í•„ë“œ ì—…ë°ì´íŠ¸ ë“±ì˜ ê¸°ëŠ¥ì„ ì œê³µí•˜ë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

<details>
  <summary>ì½”ë“œë³´ê¸°</summary>

- `updateField` - ë¬¸ì„œì˜ íŠ¹ì • í•„ë“œ ì—…ë°ì´íŠ¸  
updateDoc ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ë¬¸ì„œì˜ íŠ¹ì • í•„ë“œë¥¼ ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- `updateFieldObject` - ë°°ì—´ í•„ë“œ ë‚´ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” íŠ¹ì • ê°ì²´ ì—…ë°ì´íŠ¸  
updateDoc ë©”ì„œë“œì™€ getDoc ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ë°°ì—´ í•„ë“œ ë‚´ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” íŠ¹ì • ê°ì²´ë¥¼ ì°¾ì•„ ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```tsx
import { appFireStore } from "../firebase/config";
import { doc, updateDoc, getDoc } from "firebase/firestore";

import getAccountId from "@/utils/getAccountId";

import { DataModelType } from "@/types/dataModel.type";


const useFirestoreUpdate = (collectionName: string) => {

  const accountId = getAccountId()

  const updateField = async (documentId: string, data: DataModelType): Promise<undefined | string> => {
    try {
      if (accountId) {
        const docRef = doc(appFireStore, collectionName, documentId);
        const updateData: DataModelType = {};
        for (const [key, value] of Object.entries(data)) {
          updateData[key] = value;
        }
        await updateDoc(docRef, updateData);
        console.log("ë°ì´í„°ê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤", docRef.id);
        return docRef.id;
      } else {
        console.error("í† í°ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤");
      }
    } catch (error) {
      console.error("ë°ì´í„° ìˆ˜ì •ì„ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤:", error);
      throw error;
    }
  };

  const updateFieldObject = async (
    documentId: string,
    fieldName: string,
    targetObject: DataModelType,
    updateAttributes: DataModelType
  ): Promise<undefined | string> => {
    try {
      const docRef = doc(appFireStore, collectionName, documentId);
      const docSnapshot = await getDoc(docRef);
      if (docSnapshot.exists()) {
        const result = docSnapshot.data()[fieldName];
        for (let i = 0; i < result.length; i++) {
          const element = result[i];
          const isTargetObject = Object.keys(targetObject).every(key => element[key] === targetObject[key]);
          if (isTargetObject) {
            result[i] = { ...element, ...updateAttributes };
            break;
          }
        }
        await updateDoc(docRef, {
          [fieldName]: result
        });
        console.log("ë°ì´í„°ê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤", docRef.id);
        return docRef.id;
      } else {
        console.error("í•´ë‹¹ ë¬¸ì„œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: ", documentId);
        throw new Error(`í•´ë‹¹ ë¬¸ì„œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: ${documentId}`);
      }
    } catch (error) {
      console.error("ë°ì´í„° ìˆ˜ì •ì„ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤:", error);
      throw error;
    }
  };

  return { updateField, updateFieldObject };
};

export default useFirestoreUpdate;
```

</details>

> > ğŸ’¡ `useFirestoreDelete`
> >
> > FireStoreì˜ deleteDoc, query, where, getDocs ë©”ì„œë“œë¥¼ í™œìš©í•˜ì—¬  
> > ë‹¨ì¼ ë¬¸ì„œ ì‚­ì œ, ë°°ì—´ í•„ë“œ íŠ¹ì • ë°ì´í„° ì‚­ì œ, ê°ì²´ í•„ë“œ íŠ¹ì • ë°ì´í„° ì‚­ì œ, ì„œë¸Œì»¬ë ‰ì…˜ ë‚´ ë¬¸ì„œ ì‚­ì œ ë“±ì˜ ê¸°ëŠ¥ì„ ì œê³µí•˜ë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

<details>
  <summary>ì½”ë“œë³´ê¸°</summary>

- `deleteDocument` - ë‹¨ì¼ ë¬¸ì„œ ì‚­ì œ  
deleteDoc ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ íŠ¹ì • ë¬¸ì„œë¥¼ ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- `deleteFieldArray` - ë°°ì—´ í•„ë“œ íŠ¹ì • ë°ì´í„° ì‚­ì œ  
updateDoc ë©”ì„œë“œì™€ arrayUnion ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ë°°ì—´ í•„ë“œì—ì„œ íŠ¹ì • ì›ì†Œë¥¼ ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- `deleteFieldObject` - ê°ì²´ í•„ë“œ íŠ¹ì • ë°ì´í„° ì‚­ì œ  
updateDoc ë©”ì„œë“œì™€ getDoc ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ë°°ì—´ í•„ë“œ ë‚´ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” íŠ¹ì • ê°ì²´ë¥¼ ì°¾ì•„ ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- `deleteSubcollection` - ì„œë¸Œì»¬ë ‰ì…˜ ë‚´ ëª¨ë“  ë¬¸ì„œ ì‚­ì œ  
getDocs, deleteDoc ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì„œë¸Œì»¬ë ‰ì…˜ ë‚´ì˜ ëª¨ë“  ë¬¸ì„œë¥¼ ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```tsx
import { appFireStore } from "../firebase/config";
import { doc, deleteDoc, getDoc, updateDoc, arrayRemove, collection, query, getDocs } from "firebase/firestore";

import getAccountId from "@/utils/getAccountId";

import { DataModelType, ModelValue } from "@/types/dataModel.type";

const useFirestoreDelete = (collectionName: string) => {

  const accountId = getAccountId()

  const deleteDocument = async (documentId: string): Promise<undefined | string> => {
    try {
      if (accountId) {
        const docRef = doc(appFireStore, collectionName, documentId);
        await deleteDoc(docRef);
        console.log("ë°ì´í„°ê°€ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤", docRef);
        return docRef.id;
      } else {
        console.error("í† í°ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤");
      }
    } catch (error) {
      console.error("ë°ì´í„° ì‚­ì œë¥¼ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤:", error);
      throw error;
    }
  };

  const deleteFieldArray = async (documentId: string, fieldName: string, data: ModelValue): Promise<undefined | string> => {
    try {
      if (accountId) {
        const docRef = doc(appFireStore, collectionName, documentId);
        await updateDoc(docRef, {
          [fieldName]: arrayRemove(data)
        });
        console.log("ë°ì´í„°ê°€ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤", docRef.id);
        return docRef.id;
      } else {
        console.error("í† í°ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤");
      }
    } catch (error) {
      console.error("ë°ì´í„° ì‚­ì œë¥¼ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤:", error);
      throw error;
    }
  }

  const deleteFieldObject = async (documentId: string, fieldName: string, targetObject: DataModelType): Promise<undefined | string> => {
    try {
      if (accountId) {
        const docRef = doc(appFireStore, collectionName, documentId);
        const docSnapshot = await getDoc(docRef);
        if (docSnapshot.exists()) {
          const result = docSnapshot.data()[fieldName];
          for (let i = 0; i < result.length; i++) {
            const element = result[i];
            const isTargetObject = Object.keys(targetObject).every(key => element[key] === targetObject[key]);
            if (isTargetObject) {
              result.splice(i, 1);
              break;
            }
          }
          await updateDoc(docRef, {
            [fieldName]: result
          });
          console.log("ë°ì´í„°ê°€ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤", docRef.id);
          return docRef.id;
        } else {
          console.error("í•´ë‹¹ ë¬¸ì„œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: ", documentId);
        }
      } else {
        console.error("í† í°ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤");
      }
    } catch (error) {
      console.error("ë°ì´í„° ì‚­ì œë¥¼ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤:", error);
      throw error;
    }
  }

  const deleteSubcollection = async (documentId: string, subcollectionName: string): Promise<void> => {
    try {
      const subcollectionRef = collection(appFireStore, `${collectionName}/${documentId}/${subcollectionName}`);
      const q = query(subcollectionRef);
      const querySnapshot = await getDocs(q);

      const deletePromises = querySnapshot.docs.map(doc => deleteDoc(doc.ref));
      await Promise.all(deletePromises);

      console.log("ë°ì´í„°ê°€ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤", subcollectionName);
    } catch (error) {
      console.error("ë°ì´í„° ì‚­ì œë¥¼ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤:", error);
      throw error;
    }
  };

  return { deleteDocument, deleteFieldArray, deleteFieldObject, deleteSubcollection };
};

export default useFirestoreDelete;
```

</details>

> > ğŸ”’ `FireStore ë³´ì•ˆ ê·œì¹™ ì„¤ì •`
> > 
> > ìœ ì—°í•œ í†µì‹ ì´ ê°€ëŠ¥í•œ ë§Œí¼,  
> > ë³´ì•ˆ ê·œì¹™ì„ í†µí•´ ê° ì‚¬ìš©ìì—ê²Œ ì ì ˆí•œ ì ‘ê·¼ ê¶Œí•œì„ ë¶€ì—¬í•˜ì—¬  
> > ë¬´ë‹¨ ì ‘ê·¼ê³¼ ë¶ˆí•„ìš”í•œ ë°ì´í„° ë…¸ì¶œì„ ë°©ì§€í•  ìˆ˜ ìˆì–´ì•¼ í–ˆìŠµë‹ˆë‹¤.  
> > ì´ë¥¼ ìœ„í•´ FireStore ë³´ì•ˆ ê·œì¹™ì„ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.

<details>
  <summary>ì½”ë“œë³´ê¸°</summary>

```javascript
rules_version = "2";

service cloud.firestore {
  match /databases/{database}/documents {

    match /hashtags/{hashtagId} {
      allow read: if true;
      allow create: if request.auth != null;
      allow update, delete: if request.auth != null && request.resource.data.diff(resource.data).affectedKeys().hasOnly(["taggedPostIds"]);
    }
    
    match /locations/{locationId} {
      allow read: if true;
      allow create: if request.auth != null;
      allow update, delete: if request.auth != null && request.resource.data.diff(resource.data).affectedKeys().hasOnly(["taggedPostIds"]);
    }
    
    match /posts/{postId} {
      allow read: if true;
      allow create: if request.auth != null;
  		allow update, delete: if (request.auth != null && request.auth.uid == resource.data.authorizationId) ||
      	(request.auth != null && (request.resource.data.diff(resource.data).affectedKeys().hasOnly(["likedUsers"]))) ||
        (request.auth != null && (request.resource.data.diff(resource.data).affectedKeys().hasOnly(["comments"]))) 
    }
    
    match /schedules/{scheduleId} {
      allow read: if true;
      allow create: if request.auth != null;
      allow update, delete: if request.auth != null && request.auth.uid == resource.data.authorizationId;
    }
    
    match /users/{userId} {
      allow read: if true;
      allow create: if true;
      allow update, delete: if (request.auth != null && request.auth.uid == resource.data.authorizationId) ||
      	(request.auth != null && (request.resource.data.diff(resource.data).affectedKeys().hasOnly(["followers"]))) ||
				(request.auth != null && (request.resource.data.diff(resource.data).affectedKeys().hasOnly(["followers"]))) ||
				(request.auth != null && (request.resource.data.diff(resource.data).affectedKeys().hasOnly(["chats"]))) ||
        (request.auth != null && (request.resource.data.diff(resource.data).affectedKeys().hasOnly(["notificationHistory"])))
    }
    
    match /chats/messages/{messageId} {
      match /{document=**} {
      	allow read, write: if true;
    	}	
    }
    
    match /message-6TH4LJn9lGl7P3ngwR05/{messageId} {
      match /{document=**} {
      	allow read, write: if true;
    	}	
    }
    
  }
}

```
  
</details>

---

<br/>

### React Query ê¸°ë°˜ ì¿¼ë¦¬ ë° ë®¤í…Œì´ì…˜ í›… ìƒì„±

> `Why?`
>
> React Queryë¥¼ í†µí•œ ë°ì´í„° íŒ¨ì¹­, ì—…ë°ì´íŠ¸ê°€ ë¹ˆë²ˆí•´ì§€ë©´ì„œ,  
> ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ì—ì„œ ê³µí†µì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ì¿¼ë¦¬(ì„œë²„ë¡œë¶€í„° ë°ì´í„°ë¥¼ ì½ì–´ì˜¤ëŠ” ì‘ì—…)ì™€ ë®¤í…Œì´ì…˜(ì„œë²„ì˜ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…)ì˜ ìˆ˜ê°€ ì¦ê°€í–ˆìŠµë‹ˆë‹¤.  
> ì´ì— ë”°ë¼, ê° ì»´í¬ë„ŒíŠ¸ì—ì„œ ë™ì¼í•œ í˜•íƒœì˜ ì¿¼ë¦¬ì™€ ë®¤í…Œì´ì…˜ì„ ë°˜ë³µì ìœ¼ë¡œ importí•˜ê³  í˜¸ì¶œí•´ì•¼ í–ˆê³ ,  
> ì´ ê³¼ì •ì—ì„œ ë°œìƒí•˜ëŠ” ë¹„íš¨ìœ¨ì„±ì„ í•´ì†Œí•˜ê³ ì í–ˆìŠµë‹ˆë‹¤.

> `How?`
> 
> React QueryëŠ” ë°ì´í„°ë¥¼ ì½ê¸° ìœ„í•œ useQueryì™€ ë°ì´í„°ë¥¼ ë³€í˜•í•˜ê¸° ìœ„í•œ useMutationì´ë¼ëŠ” ë‘ ê°€ì§€ í›…ì„ ì œê³µí•©ë‹ˆë‹¤.  
> ì´ë¥¼ í™œìš©í•˜ì—¬ ë°ì´í„° íŒ¨ì¹­, ìºì‹±, ì—ëŸ¬ ì²˜ë¦¬, ì—…ë°ì´íŠ¸ ë“±  
> ë‹¤ì–‘í•œ ì˜µì…˜ì„ í¬í•¨í•œ í›…ì„ êµ¬í˜„í•˜ê³ , ëª¨ë“  ë°ì´í„°ì˜ íŒ¨ì¹­, ì—…ë°ì´íŠ¸ ê³¼ì •ì— ì ìš©í–ˆìŠµë‹ˆë‹¤.
>
> > ğŸ’¡ `useDataQuery`  
> >
> > useQuery í›… ê¸°ë°˜ìœ¼ë¡œ  
> > ë°ì´í„°ì˜ ì‹ ì„ ë„ ë° ìºì‹œ ì‹œê°„, ì´ˆê¸° ë°ì´í„° íŒ¨ì¹­ ì—¬ë¶€ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•˜ë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

<details>
  <summary>ì½”ë“œë³´ê¸°</summary>

- `queryKey`  
ì¿¼ë¦¬ë¥¼ ì‹ë³„í•˜ëŠ” í‚¤ë¡œ, í•´ë‹¹ í‚¤ë¥¼ í†µí•´ ìºì‹±ê³¼ ì¿¼ë¦¬ ë¬´íš¨í™”ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- `queryFn`  
ë°ì´í„°ë¥¼ íŒ¨ì¹˜í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.

- `select`  
ë°ì´í„°ë¥¼ ì„ íƒí•˜ê³  ë³€í™˜í•  ìˆ˜ ìˆëŠ” ì˜µì…˜ìœ¼ë¡œ, ì¿¼ë¦¬ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¨ í›„ ì›í•˜ëŠ” í˜•íƒœë¡œ ê°€ê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- `queryOptions`  
staleTime, cacheTime ë“±ì˜ ì˜µì…˜ì„ ì„¤ì •í•˜ì—¬ ë°ì´í„°ì˜ ì‹ ì„ ë„ì™€ ìºì‹œ ì‹œê°„ì„ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- `enabled`  
ì¿¼ë¦¬ ì‹¤í–‰ ì—¬ë¶€ë¥¼ ê²°ì •í•  ìˆ˜ ìˆëŠ” ì˜µì…˜ìœ¼ë¡œ, ì´ˆê¸° ë°ì´í„° íŒ¨ì¹­ì„ ì œì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```tsx
import { useQuery } from "@tanstack/react-query";

export interface QueryOptions {
  staleTime?: number;
  gcTime?: number;
}

const useDataQuery = <TQueryFnData, TError, TData>(
  queryKey: string, 
  queryFn: any, 
  select: any,
  queryOptions?: QueryOptions,
  enabled = true
) => {

  const { data, isLoading, isSuccess, isError, isFetching, refetch } = useQuery<TQueryFnData, TError, TData>({
    queryKey: [queryKey],
    queryFn: queryFn,
    select: select,
    enabled: enabled,
    ...queryOptions
  })  

  return { data, isLoading, isSuccess, isError, isFetching, refetch }
}

export default useDataQuery
```

</details>

> > ğŸ’¡ `useDataMutation`  
> >
> > useMutation í›… ê¸°ë°˜ìœ¼ë¡œ   
> > ë°ì´í„° ë³€í˜• í›„ ì½œë°± í•¨ìˆ˜, ë®¤í…Œì´ì…˜ ì„±ê³µ ì‹œ ì¿¼ë¦¬ ë¬´íš¨í™” ì—¬ë¶€ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•˜ë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

<details>
  <summary>ì½”ë“œë³´ê¸°</summary>

- `mutationKey`  
ë®¤í…Œì´ì…˜ì„ ì‹ë³„í•˜ëŠ” í‚¤ì…ë‹ˆë‹¤.

- `mutationFn`  
ë°ì´í„°ë¥¼ ë³€í˜•í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.

- `onSuccess`  
ë®¤í…Œì´ì…˜ì´ ì„±ê³µí–ˆì„ ë•Œ í˜¸ì¶œë˜ëŠ” ì½œë°± í•¨ìˆ˜ì…ë‹ˆë‹¤.

- `onError`  
ë®¤í…Œì´ì…˜ì´ ì‹¤íŒ¨í–ˆì„ ë•Œ í˜¸ì¶œë˜ëŠ” ì½œë°± í•¨ìˆ˜ì…ë‹ˆë‹¤.

- `clientUpdate`  
ì„±ê³µ ì‹œ ì¿¼ë¦¬ë¥¼ ë¬´íš¨í™”í• ì§€ ì—¬ë¶€ë¥¼ ê²°ì •í•  ìˆ˜ ìˆëŠ” ì˜µì…˜ì…ë‹ˆë‹¤.

```tsx
import { useMutation, useQueryClient } from "@tanstack/react-query";

const useDataMutation = (
  mutationKey: any, 
  mutationFn: any,
  onSuccess: () => void,
  onError: () => void,
  clientUpdate = true
) => {

  const queryClient = useQueryClient();
    
  const { mutate, isPending } = useMutation({
    mutationKey: [mutationKey],
    mutationFn: mutationFn,
    onSuccess: () => {
      onSuccess()
      clientUpdate && queryClient.invalidateQueries(mutationKey)
    },
    onError: () => {
      onError()
    },
  })

  return { mutate, isPending };
};

export default useDataMutation;
```

</details>

---

<br/>

### ì¬ì¡°íšŒì™€ ë‚™ê´€ì  ì—…ë°ì´íŠ¸

> `How?`
> 
> ë°ì´í„°ë¥¼ ì—…ë°ì´íŠ¸ í•˜ëŠ” ê³¼ì •ì—ì„œ  
> ê²Œì‹œë¬¼ ì²˜ë¦¬ë‚˜ í”„ë¡œí•„ ìˆ˜ì • ë“±ê³¼ ê°™ì´ ì •í™•í•˜ê³  ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì—…ë°ì´íŠ¸ê°€ í•„ìš”í•œ ê²½ìš°ì—ëŠ”  
> ì¬ì¡°íšŒ(ì¿¼ë¦¬ ë¬´íš¨í™”)ë¥¼ í†µí•´ í•­ìƒ ìµœì‹  ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. 
> 
> ë°˜ë©´, ë°ì´í„°ì˜ ì¤‘ìš”ë„ëŠ” ìƒëŒ€ì ìœ¼ë¡œ ë‚®ì§€ë§Œ ìƒí˜¸ì‘ìš©ì´ ë¹ˆë²ˆí•˜ê³   
> ì‚¬ìš©ìì—ê²Œ ì¦‰ê°ì ì¸ í”¼ë“œë°±ì„ í†µí•´ ì‹œìŠ¤í…œì´ ë¹ ë¥´ê²Œ ë°˜ì‘í•œë‹¤ëŠ” ì¸ì‹ì„ ì‹¬ì–´ì¤˜ì•¼ í•˜ëŠ” ê²½ìš°ì—ëŠ”  
> ë‚™ê´€ì  ì—…ë°ì´íŠ¸ ë°©ì‹ì„ ì ìš©í–ˆìŠµë‹ˆë‹¤.
>
> > ğŸ’¡ `ì¬ì¡°íšŒ`
> >
> > queryClientì˜ invalidateQueries ê¸°ëŠ¥ì„ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.   
> > ì´ë¥¼ í†µí•´ GET ìš”ì²­ ì‹œ ìƒì„±ëœ ì¿¼ë¦¬ í‚¤ì™€ ì¼ì¹˜í•˜ëŠ” ìºì‹œ ë°ì´í„°ë¥¼ ë¬´íš¨í™”í•˜ê³ ,  
> > ì¿¼ë¦¬ê°€ ë‹¤ì‹œ ì‹¤í–‰ë  ë•Œ ì„œë²„ë¡œë¶€í„° ìµœì‹  ë°ì´í„°ë¥¼ ë°›ì•„ì™€ì„œ ë°ì´í„°ë¥¼ ê°±ì‹ í•˜ë„ë¡ í–ˆìŠµë‹ˆë‹¤.

<details>
  <summary>ì½”ë“œë³´ê¸°</summary>

```tsx
onSuccess: () => {
  onSuccess()
  clientUpdate && queryClient.invalidateQueries(mutationKey)
},
```

</details>

> > ğŸ’¡ `ë‚™ê´€ì  ì—…ë°ì´íŠ¸`
> >
> > onMutate ë©”ì„œë“œì™€ onError ë©”ì„œë“œë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.  
> > onMutate ë©”ì„œë“œë¥¼ í†µí•´ API ìš”ì²­ì´ ì„±ê³µí–ˆì„ ê²½ìš°ë¥¼ ê°€ì •í•˜ì—¬, ë°ì´í„°ë¥¼ ê°€ê³µí•´ í™”ë©´ì„ ì—…ë°ì´íŠ¸ í•˜ê³ ,  
> > onError ë©”ì„œë“œë¥¼ í†µí•´ API ìš”ì²­ì„ ë³´ë‚´ ì„±ê³µì„ ê°€ì •í•˜ê³  í™”ë©´ì€ ì—…ë°ì´íŠ¸ í–ˆì§€ë§Œ,  
> > ë§Œì•½ ì„œë²„ì—ì„œ ì—ëŸ¬ë¥¼ ë°˜í™˜í–ˆë‹¤ë©´ ê¸°ì¡´ ë°ì´í„°ë¡œ í’€ë°±í•˜ë„ë¡ í–ˆìŠµë‹ˆë‹¤.

<details>
  <summary>ì½”ë“œë³´ê¸°</summary>

- `queryKeys`  
ì—…ë°ì´íŠ¸í•  ì—¬ëŸ¬ ì¿¼ë¦¬ í‚¤ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.

- `mutationFn`  
ë°ì´í„° ë³€í˜•ì„ ìˆ˜í–‰í•˜ëŠ” í•¨ìˆ˜ë¡œ, ì„œë²„ì— ë°ì´í„° ë³€ê²½ì„ ìš”ì²­í•˜ëŠ” ë¡œì§ì´ í¬í•¨ë©ë‹ˆë‹¤.

- `cancelQueries`  
API ìš”ì²­ ì´í›„ì— ë°œìƒí•˜ëŠ” ìš”ì²­ì„ ì·¨ì†Œí•˜ëŠ” ë©”ì„œë“œë¡œ ìš”ì²­ì´ ì—ëŸ¬ê°€ ë°œìƒí–ˆë‹¤ë©´ refetchê°€ ì¼ì–´ë‚˜ì§€ ì•Šë„ë¡ ë°©ì§€í•©ë‹ˆë‹¤.

- `oldPostsData`  
ê° ì¿¼ë¦¬ í‚¤ì— ëŒ€í•œ ì´ì „ ë°ì´í„°ë¥¼ ì €ì¥í•©ë‹ˆë‹¤. ë§Œì•½ ë‚˜ì¤‘ì— ì—ëŸ¬ê°€ ë°œìƒí–ˆë‹¤ë©´ ë°ì´í„° ë³µì›ì„ ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤.

- `setQueryData`  
ì¿¼ë¦¬ í‚¤ì— ëŒ€í•œ ë°ì´í„°ë¥¼ ë‚™ê´€ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë¥¼ ìˆ˜í–‰í•˜ëŠ” ë©”ì„œë“œë¡œ, ì—…ë°ì´íŠ¸í•˜ëŠ” ë¡œì§ì´ í¬í•¨ë©ë‹ˆë‹¤.

- `onError`  
ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´ oldPostsData í†µí•´ ì €ì¥í•´ë‘ì—ˆë˜ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ì „ ë°ì´í„°ë¥¼ ë³µì›í•©ë‹ˆë‹¤.

```tsx
import { useMutation, useQueryClient } from "@tanstack/react-query";

...

const LikeService = () => {

  ...

  const queryClient = useQueryClient();

  const queryKeys = ["all-posts", "following-posts", "like-posts", "tag-posts", "single-posts"];

  return useMutation({
    mutationFn: (...) => {
      ...
    },
    onMutate: (...) => {
      queryKeys.forEach(async (key) => {
        await queryClient.cancelQueries({ queryKey : [key] });
      });
    
      const oldPostsData = queryKeys.map((key) => queryClient.getQueryData<...>([key]));
    
      queryKeys.forEach((key, index) => {
        const currentOldPostsData = oldPostsData[index];
          queryClient.setQueryData([key], () => {
            ...
          })
      });
    
      return { oldPostsData };
    },
    onError: (error: Error, _, context: { oldPostsData?: ... } | undefined) => {
      if (context?.oldPostsData) {
        queryKeys.forEach((key) => {
          queryClient.setQueryData([key], context.oldPostsData);
        });
      } else {
        console.error(error);
        throw error;
      }
    },
  });
};

export default LikeService;
```

</details>

---

<br/>

### Context APIë¥¼ í™œìš©í•œ ì¿¼ë¦¬ ìƒíƒœ ì „ë‹¬

> `Why?`
>
> ì‚¬ìš©ìì˜ íšŒì› ì •ë³´ë‚˜ ì„¤ì • ê°’ì€   
> ì•±ì´ ë¡œë“œë˜ëŠ” ì‹œì ì—ì„œ ë°ì´í„° íŒ¨ì¹­ì„ í†µí•´ ë¶ˆëŸ¬ì™€ì•¼ í–ˆìŠµë‹ˆë‹¤.   
> ì´ë¥¼ ìœ„í•´ useQuery í›…ì„ í†µí•´ ë°˜í™˜ëœ ì¿¼ë¦¬ ìƒíƒœ(data, isLoading, isFetching, refetch)ë¥¼ í™œìš©í–ˆì§€ë§Œ,  
> ì´ëŸ¬í•œ ìƒíƒœë¥¼ ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì¼ê´€ì„± ìˆê²Œ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í•˜ëŠ” ë°©ì‹ì´ í•„ìš”í–ˆìŠµë‹ˆë‹¤.

> `How?`
>
> useQuery í›…ì„ í†µí•´ ë°˜í™˜ë°›ì€ data, isLoading, isFetching, refetch ë“±ì˜ ì¿¼ë¦¬ ìƒíƒœë¥¼   
> Context APIë¥¼ í™œìš©í•˜ì—¬ ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì—ì„œ ìì‹ ì»´í¬ë„ŒíŠ¸ë¡œ ì „ë‹¬í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ì—ì„œ ìƒíƒœë¥¼ ê³µìœ í•˜ë„ë¡ í–ˆìŠµë‹ˆë‹¤.


<details>
  <summary>ì½”ë“œë³´ê¸°</summary>

> UserInfoProvider ë¼ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì„±í•˜ì—¬  
> Context APIë¥¼ í†µí•´ ì¿¼ë¦¬ ìƒíƒœë¥¼ ì œê³µí•˜ê³ ,  
> useContext í›…ì„ í†µí•´ ìì‹ ì»´í¬ë„ŒíŠ¸ì—ì„œ í•´ë‹¹ ìƒíƒœë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

```tsx
import { useRef, useEffect, createContext } from "react";

import UserService from "@/services/userService";

interface UserContextType {
  data: ReadDocumentType<UsersType> | undefined,
  isLoading: boolean,
  isFetching: boolean,
  refetch: () => void
}

const UserContext = createContext<UserContextType>({
  data: undefined,
  isLoading: true,
  isFetching: true,
  refetch: () => { }
});

const UserInfoProvider = ({ children }: { children: React.ReactNode }) => {

  const { ReadUser } = UserService();
  const { data, isLoading, isFetching, refetch } = ReadUser();

  return (
    <UserContext.Provider value={{ data, isLoading, isFetching, refetch }}>
      <div
        id="wrapper"
        className="flex flex-col bg-background w-screen h-dvh transition duration-300"
      >
        {children}
      </div>
    </UserContext.Provider>
  );
};

export { UserInfoProvider, UserContext };

const App = () => {

  const location = useLocation();

  return (
    <UserInfoProvider>
      <RouteTransition location={location}>
        <Routes location={location}>
          ...
        </Routes>
      </RouteTransition>
      <NavigationMenu />
      <ModalStack />
    </UserInfoProvider>
  )
}
```

```tsx
import { useContext } from "react";
import { UserContext } from "./UserInfoProvider";

const Component = () => {

  const { data, data, isLoading, isFetching, refetch } = useContext(UserContext);

  ...

  return (
    ...
  )
}
```

</details>

---

<br/>

### ë°ì´í„° ì„ì‹œì €ì¥

> `How?`
>
> ê²Œì‹œë¬¼ì´ë‚˜ ì¼ì •ì„ ì‘ì„±í•˜ëŠ” ë„ì¤‘ í˜ì´ì§€ë¥¼ ì´íƒˆí•  ê²½ìš°ë¥¼ ëŒ€ë¹„í•˜ì—¬   
> ì‘ì„±ì— í•„ìš”í•œ í¼ì— ëŒ€í•´ ë°ì´í„°ê°€ ë³€ê²½ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ê³ ,  
> í¼ì˜ ì´ˆê¸°ê°’ê³¼ ì¼ì¹˜í•˜ì§€ ì•Šì„ ê²½ìš°, íŒì—…ì„ ë„ì›Œ ì„ì‹œ ì €ì¥ì„ í•  ìˆ˜ ìˆë„ë¡ ì•ˆë‚´í–ˆìŠµë‹ˆë‹¤.

<details>
  <summary>ì½”ë“œë³´ê¸°</summary>

- `selectorFamily`  
Recoilì—ì„œ ë™ì  íŒŒë¼ë¯¸í„°ë¥¼ ë°›ì•„ ì…€ë ‰í„°ë¥¼ ìƒì„±í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” API ì…ë‹ˆë‹¤.

- `hasValueChangedSelector`  
selectorFamilyë¥¼ í†µí•´ ìƒíƒœì˜ ì´ˆê¸°ê°’ê³¼ í˜„ì¬ê°’ì„ ë°›ê³ , 
SON.stringifyë¥¼ í†µí•´ ê¹Šì€ ë¹„êµë¥¼ ì§„í–‰í•˜ì—¬ ë‘ ê°’ì´ ë‹¤ë¥¸ì§€ ì—¬ë¶€ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

- `isPostFormModifiedSelector`  
hasValueChangedSelectorë¥¼ ì‚¬ìš©í•˜ì—¬ í˜„ì¬ ì‘ì„± ì¤‘ì¸ í¼ ìƒíƒœê°’ì´ ì´ˆê¸°ê°’ê³¼ ë‹¤ë¥¸ì§€ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 

```tsx
import { selector, selectorFamily } from "recoil";

import { postFormValueDefault, postFormValue } from "../atoms/postFormValueAtom";

type Params = {
  defaultValue: any;
  compareValue: any;
};

export const hasValueChangedSelector = selectorFamily<boolean, Params>({
  key: "hasValueChangedSelector",
  get: ({ defaultValue, compareValue }) => ({ get }) => {
    const currentValue = get(compareValue);
    return JSON.stringify(defaultValue) !== JSON.stringify(currentValue);
  },
});

export const isPostFormModifiedSelector = selector({
  key: "isPostFormModifiedSelector",
  get: ({get}) => {
    const hasChanged = get(hasValueChangedSelector({ defaultValue: postFormValueDefault, compareValue: postFormValue }));
    return hasChanged;
  },
});
```

```tsx
import { useRecoilValue } from "recoil";
import {isPostFormModifiedSelector } from "@/store";

const PostPage = () => {

  const isPostFormModified = useRecoilValue(isPostFormModifiedSelector);

  return (
    <FeedHeader 
      handleFunc={
        () => {
          if (isPostFormModified) {
            openModal("Alert", "ì´ì „ì— ì‘ì„±í•˜ë˜ ë‚´ìš©ì´ ìˆìŠµë‹ˆë‹¤.", ["ìƒˆë¡œ ì‘ì„±", "ì´ì–´ì„œ ì‘ì„±"], [
              () => {
                closeModal()
                resetPostFormState()
                navigate("/post/update", {
                  state: { direction: "next" },
                })
              },
              () => {
                closeModal()
                navigate("/post/update", {
                  state: { direction: "next" },
                })
              }
            ])
          } else {
            navigate("/post/update", {
              state: { direction: "next" },
            })
          }
        }
      }
    />
  )
}
```

</details>

---

<br/>

### ê²€ìƒ‰ ë””ë°”ìš´ìŠ¤

> `Why?`
>
> Firebaseì™€ ê°™ì€ í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ ì‚¬ìš© ì‹œ ìš”ì²­ ìˆ˜ì— ë”°ë¼ ë¹„ìš©ì´ ì¦ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
> ì´ì— ë”°ë¼ ì‚¬ìš©ìê°€ ê²€ìƒ‰ ê¸°ëŠ¥ì„ ì´ìš©í•  ë•Œ,  
> ì…ë ¥í•  ë•Œë§ˆë‹¤ ë¶ˆí•„ìš”í•œ ìš”ì²­ì´ ë‹¤ìˆ˜ ë°œìƒí•˜ë©´ ë¹„ìš©ì´ ê¸‰ì¦í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì—  
> ì´ë¥¼ ë°©ì§€í•˜ê³  ê²½ì œì ì¸ ë¶€ë‹´ì„ ìµœì†Œí™”í•˜ê³ ì í•˜ì˜€ìŠµë‹ˆë‹¤.

> `How?` 
>
> ì‚¬ìš©ìê°€ ê²€ìƒ‰ ê¸°ëŠ¥ì„ ì´ìš© ì‹œ   
> ì…ë ¥ì„ í•  ë•Œë§ˆë‹¤ ì„œë²„ì— ìš”ì²­ì„ ë³´ë‚´ëŠ” ëŒ€ì‹ ,   
> ì…ë ¥ì´ ë©ˆì¶˜ í›„ ì¼ì • ì‹œê°„ì´ ì§€ë‚˜ë„ ì¶”ê°€ ì…ë ¥ì´ ì—†ì„ ë•Œë§Œ ìš”ì²­ì„ ë³´ë‚´ë„ë¡ í–ˆìŠµë‹ˆë‹¤.

<details>
  <summary>ì½”ë“œë³´ê¸°</summary>

> ì…ë ¥ê°’ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ ì´ì „ íƒ€ì´ë¨¸ë¥¼ í´ë¦¬ì–´í•˜ê³  ìƒˆ íƒ€ì´ë¨¸ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.   
> ë§Œì•½, ì¼ì • ì‹œê°„ ë™ì•ˆ ì…ë ¥ê°’ì´ ë³€ê²½ë˜ì§€ ì•Šìœ¼ë©´   
> ì…ë ¥ì´ ëª¨ë‘ ì™„ë£Œë˜ì—ˆë‹¤ê³  íŒë‹¨í•˜ê³  isInputDone ìƒíƒœë¥¼ ë°˜í™˜í•˜ì—¬ isInputDoneì´ trueì¼ ë•Œ ë°ì´í„° íŒ¨ì¹­ì„ ì§„í–‰í•˜ë„ë¡ í–ˆìŠµë‹ˆë‹¤.

```tsx
import { useState, useEffect } from "react";

const useDebounce = (value: string, delay: number, fetching: boolean) => {
  const [isInputDone, setIsInputDone] = useState<boolean>(false);
  const [isFetching, setIsFetching] = useState<boolean>(fetching);
  const [timerId, setTimerId] = useState<ReturnType<typeof setTimeout> | null>(null);

  useEffect(() => {
    if (timerId) {
      clearTimeout(timerId);
      setIsInputDone(false);
    }

    if (value) {
      setIsFetching(true);
      setTimerId(setTimeout(() => {
        setIsInputDone(true);
      }, delay));
    }
  }, [value, delay]);

  useEffect(() => {
    if (!fetching) {
      setIsFetching(false);
    }
  }, [fetching])

  return { isInputDone, isFetching };
}


export default useDebounce;
```

```tsx
import useDebounce from "@/hooks/useDebounce";
import LocationService from "@/services/locationService";

const LocationLinkList = ( ... ) => {

  const { SearchLocation } = LocationService()
  const { data, isFetching: isFetchingSearchLocation, refetch } = SearchLocation()

  const { isInputDone, isFetching } = useDebounce(inputValueState, 500, isFetchingSearchLocation);

  useEffect(() => {
    if (isInputDone) {
      refetch()
    }
  }, [isInputDone])

  return (
    {isFetching && 
      ...
    }
  )
}
```

</details>

---

<br/>

### ë¬´í•œ ìŠ¤í¬ë¡¤

> `Why?`
>
> ë°ì´í„° íŒ¨ì¹­ ì‹œ ëŒ€ëŸ‰ì˜ ë°ì´í„°ë¥¼ í•œ ë²ˆì— ë¶ˆëŸ¬ì˜¬ ê²½ìš°  
> ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ì´ë‚˜ í˜ì´ì§€ ë¡œë”© ì‹œê°„ì´ í¬ê²Œ ì¦ê°€í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì—  
> ì´ˆê¸° í˜ì´ì§€ ë¡œë“œ ì‹œ ëª¨ë“  ì½˜í…ì¸ ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ëŒ€ì‹ ,  
> í•„ìš”í•œ ë§Œí¼ë§Œ ë°ì´í„°ë¥¼ ì ì§„ì ìœ¼ë¡œ ë¶ˆëŸ¬ì˜¤ëŠ” ë°©ì‹ì´ í•„ìš”í–ˆìŠµë‹ˆë‹¤.

> `How?`
>  
> ìŠ¤í¬ë¡¤ì´ ìƒë‹¨ì´ë‚˜ í•˜ë‹¨ìœ¼ë¡œ ì¼ì • ìˆ˜ì¤€ ë„ë‹¬í•˜ë©´,   
> ë§ˆì§€ë§‰ìœ¼ë¡œ ë¶ˆëŸ¬ì˜¨ ë¬¸ì„œë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë‹¤ìŒ ë¬¸ì„œë¶€í„° ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë°©ì‹ìœ¼ë¡œ ë¬´í•œìŠ¤í¬ë¡¤ì„ êµ¬í˜„í•˜ì—¬   
> ë¶ˆí•„ìš”í•œ ìš”ì²­ì„ ìµœì†Œí™”í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

<details>
  <summary>ì½”ë“œë³´ê¸°</summary>

> ì‚¬ìš©ìê°€ í˜ì´ì§€ ìƒë‹¨ì´ë‚˜ í•˜ë‹¨ì— ë„ë‹¬í–ˆëŠ”ì§€ë¥¼ ê°ì§€í•˜ì—¬   
> ë„ë‹¬í–ˆì„ ë•Œ ë°ì´í„° íŒ¨ì¹­ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ ë” ë§ì€ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ë„ë¡ í–ˆìŠµë‹ˆë‹¤.   
> ìƒë‹¨ì— ë„ë‹¬í–ˆì„ ê²½ìš°ì—ëŠ” ìƒˆë¡œìš´ ë°ì´í„°ê°€ ì¶”ê°€ëœ í›„   
> ë¬¸ì„œì˜ ì „ì²´ ë†’ì´ì—ì„œ ìƒˆë¡œìš´ ë°ì´í„°ê°€ ì¶”ê°€ë˜ê¸° ì´ì „ì— ì €ì¥ëœ ìŠ¤í¬ë¡¤ ìœ„ì¹˜ë¥¼ ë¹¼ëŠ” ë°©ë²•ìœ¼ë¡œ   
> ìì—°ìŠ¤ëŸ½ê²Œ ì´ì–´ì§€ëŠ” ë°ì´í„°ë¥¼ ë³¼ ìˆ˜ ìˆë„ë¡ í–ˆìŠµë‹ˆë‹¤.

```tsx
import { useState, useEffect } from "react";

const useScrollTop = (): boolean => {
  const [isTop, setIsTop] = useState<boolean>(false);

  useEffect(() => {
    const handleScroll = (): void => {
      const scrollTop = window.scrollY || document.documentElement.scrollTop;
      setIsTop(scrollTop <= 50);
    };

    window.addEventListener("scroll", handleScroll);

    return () => {
      window.removeEventListener("scroll", handleScroll);
    };
  }, []);

  return isTop;
}

export default useScrollTop;
```

```tsx
import useScrollTop from "@/hooks/useScrollTop";

const ChatRoomPage = () => {

  const [scrollPosition, setScrollPosition] = useState<number>(0)

  const isTop = useScrollTop()

  useEffect(() => {
    if (isTop) {
      loadMoreMessages();
    }
  }, [isTop]);

  useEffect(() => {
    if (scrollPosition !== 0) {
      const newScrollHeight = document.body.scrollHeight;

      window.scrollTo({
        top: newScrollHeight - scrollPosition,
        behavior: "auto"
      });

      setScrollPosition(0);
    }
  }, [scrollPosition]);
}
```

---

```tsx
import { useState, useEffect } from "react";

const useScrollBottom = (): boolean => {
  const [isBottom, setIsBottom] = useState<boolean>(false);

  useEffect(() => {
    const handleScroll = (): void => {
      const scrollTop = window.scrollY || document.documentElement.scrollTop;
      const clientHeight = window.innerHeight;
      const scrollHeight = document.documentElement.scrollHeight;

      setIsBottom(scrollTop + clientHeight + 50 >= scrollHeight);
    };

    window.addEventListener("scroll", handleScroll);

    return () => {
      window.removeEventListener("scroll", handleScroll);
    };
  }, []);

  return isBottom;
}

export default useScrollBottom;
```

```tsx
import useScrollBottom from "@/hooks/useScrollBottom";

const PostPage = () => {

  const isBottom = useScrollBottom();

  useEffect(() => {
    if (isBottom) {
      if (currentCategory === "all-posts") {
        refetchPostAll()
      } else if (currentCategory === "following-posts") {
        refetchPostFollow()
      } else if (currentCategory === "like-posts") {
        refetchPostLike()
      } else if (currentCategory === "tag-posts") {
        refetchPostTag()
      }
    }
  }, [isBottom]);
}
```

</details>

---

<br/>

### ìŠ¤í¬ë¡¤ ìœ„ì¹˜ ì €ì¥

> `Why?`
>
> ë¼ìš°íŠ¸ ì´ë™ ì‹œ ìŠ¤í¬ë¡¤ ìœ„ì¹˜ê°€ ì´ˆê¸°í™”ë˜ëŠ” ë™ì‘ì€  
> ì‚¬ìš©ìê°€ í˜ì´ì§€ë¥¼ íƒìƒ‰í•  ë•Œì˜ ì—°ì†ì„±ê³¼ í¸ì˜ì„±ì„ í¬ê²Œ ì¢Œìš°í•œë‹¤ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤.  
> ë”°ë¼ì„œ, ìŠ¤í¬ë¡¤ ìœ„ì¹˜ë¥¼ ì €ì¥í•˜ì—¬ ì‚¬ìš©ìê°€ ì´ì „ì— ë³´ë˜ ìœ„ì¹˜ë¡œ ì‰½ê²Œ ë˜ëŒì•„ê°ˆ ìˆ˜ ìˆë„ë¡ í•˜ê³ ì í•˜ì˜€ìŠµë‹ˆë‹¤.

> `How?`
>
> í˜ì´ì§€ ë³„ë¡œ ìŠ¤í¬ë¡¤ ìœ„ì¹˜ê°’ì„ ì „ì—­ ìƒíƒœë¡œ ê´€ë¦¬í•˜ì—¬  
> ìŠ¤í¬ë¡¤ ì´ë²¤íŠ¸ê°€ ë°œìƒí•  ë•Œë§ˆë‹¤ í˜„ì¬ í˜ì´ì§€ì˜ ìŠ¤í¬ë¡¤ ìœ„ì¹˜ë¥¼ ì €ì¥í•˜ê³ ,  
> ì‚¬ìš©ìê°€ ë‹¤ë¥¸ í˜ì´ì§€ë¡œ ì´ë™í•œ í›„ ë‹¤ì‹œ ëŒì•„ì˜¬ ë•Œ,  
> ì €ì¥ëœ ìŠ¤í¬ë¡¤ ìœ„ì¹˜ë¡œ ëŒì•„ê°€ë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

<details>
  <summary>ì½”ë“œë³´ê¸°</summary>

```tsx
import { atom } from "recoil";

interface scrollPositionValueType {
  post: number,
  schedule: number,
  message: number,
  setting: number
}

export const scrollPositionValueDefault = {
  post: 0,
  schedule: 0,
  message: 0,
  setting: 0
};

export const scrollPositionValue = atom<scrollPositionValueType>({
  key: "scrollPositionValue",
  default: scrollPositionValueDefault,
});
```

```tsx
import { useRecoilState } from "recoil"

const [scrollPositionValueState, setScrollPositionValueState] = useRecoilState(scrollPositionValue)

const pathToSave = [
  "/post",
  "/schedule",
  "/message",
  "/setting",
];

const handleScroll = () => {
  const scrollTop = window.scrollY || document.documentElement.scrollTop

  if (pathToSave.includes(location.pathname)) {
    setScrollPositionValueState(prev => ({
      ...prev,
      [location.pathname.slice(1)]: scrollTop
    }));
  }
};

useEffect(() => {
  if (location.pathname === "/post" || location.pathname === "/schedule" || location.pathname === "/message" || location.pathname === "/setting") {
    window.scrollTo({
      behavior: "smooth",
      top: (location.pathname === "/post" && scrollPositionValueState["post"] ||
        location.pathname === "/schedule" && scrollPositionValueState["schedule"] ||
        location.pathname === "/message" && scrollPositionValueState["message"] ||
        location.pathname === "/setting" && scrollPositionValueState["setting"]) || 0
    })
  }

  window.addEventListener("scroll", handleScroll);

  return () => {
    window.removeEventListener("scroll", handleScroll);
  };
}, [navigate]);
```

</details>

---

<br/>

### Intersection Observer APIë¥¼ í™œìš©í•œ ì±„íŒ… ì½ìŒ ì²˜ë¦¬

> `Why?`  
>
> ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì±„íŒ… ë£¸ì— ì ‘ì†í•œ ìƒíƒœë¡œ ë‹¤ë¥¸ ì‘ì—…ì„ í•˜ëŠ” ê²½ìš°  
> ì‚¬ìš©ìì˜ ì˜ë„ì™€ ë‹¤ë¥´ê²Œ ì±„íŒ…ì´ ì½íˆëŠ” ê²ƒì„ ë°©ì§€í•˜ë ¤ê³  í–ˆìŠµë‹ˆë‹¤.  
> ì´ëŠ” ì‹¤ì œë¡œ ì‚¬ìš©ìê°€ ì±„íŒ…ì„ ì½ì—ˆëŠ”ì§€ ì •í™•í•˜ê²Œ íŒë‹¨í•˜ê³   
> ì˜ëª»ëœ ì½ìŒ í‘œì‹œë¡œ ì¸í•œ í˜¼ì„ ì„ ë°©ì§€í•˜ê¸° ìœ„í•¨ì´ì—ˆìŠµë‹ˆë‹¤.

> `How?`
>
> Intersection Observer APIë¥¼ í™œìš©í•˜ì—¬ íŠ¹ì • ë©”ì‹œì§€ê°€ ì‚¬ìš©ìì˜ ë·°í¬íŠ¸ì— ì§„ì…í•  ë•Œ,  
> Firestoreì˜ í•´ë‹¹ ì±„íŒ…ì— í•´ë‹¹í•˜ëŠ” ë¬¸ì„œ ê°’ì´ ì—…ë°ì´íŠ¸ ë˜ë„ë¡ í–ˆìŠµë‹ˆë‹¤.  
> ë˜í•œ, í˜„ì¬ ë¡œê·¸ì¸ ëœ ê³„ì • IDì™€ ë©”ì‹œì§€ì˜ ì‚¬ìš©ì IDë¥¼ ë¹„êµí•˜ì—¬,   
> ë³¸ì¸ì˜ ë©”ì‹œì§€ê°€ ì•„ë‹ ê²½ìš°ì—ë§Œ ì½ìŒ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•˜ë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

<details>
  <summary>ì½”ë“œë³´ê¸°</summary>

> ë©”ì‹œì§€ ìš”ì†Œì— ëŒ€í•œ refë¥¼ ì„¤ì •í•˜ì—¬, ì´ë¥¼ Intersection Observerë¡œ ê´€ì°°í•˜ë„ë¡ í–ˆìŠµë‹ˆë‹¤.    
> ë©”ì‹œì§€ê°€ ë·°í¬íŠ¸ì— ë“¤ì–´ì˜¤ë©´ observe ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ì—¬ Firestore í•„ë“œë¥¼ ì—…ë°ì´íŠ¸í•˜ê³ ,  
> ë©”ì‹œì§€ ìš”ì†Œê°€ ë·°í¬íŠ¸ì—ì„œ ë²—ì–´ë‚˜ë©´ unobserveë¥¼ í˜¸ì¶œí•˜ì—¬ ê´€ì°°ì„ ì¤‘ì§€í•˜ê²Œ ë©ë‹ˆë‹¤.

```tsx
import useFirestoreUpdate from "@/hooks/useFirestoreUpdate";

interface MessagesType {
  userId: string,
  isRead: boolean,
  id?: string,
  isLocal?: boolean
  text?: string,
  link?: LinkType
  photoURL?: string[],
  createdAt?: Timestamp,
}

const ChatMessageBox = ( { data }: { data: MessagesType } ) => {
  const messageRef = useRef<HTMLLIElement | null>(null);
  const { id, userId, text, photoURL, link, isRead, createdAt, isLocal } = data

  const { updateFieldObject } = useFirestoreUpdate("users")

  const accountId = getAccountId()

  useEffect(() => {
    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting && !data.isRead && accountId !== userId) {
            db.collection(`chats/messages/message-${chatRoomId}`).doc(id).update({
              isRead: true,
            });
          }
        });
        if (isRead === false && userId !== accountId) {
          updateFieldObject(
            accountId,
            "chats",
            { id: chatRoomId },
            {
              unreadLength: 0,
            }
          )
        }
      },
      {
        rootMargin: "0px",
        threshold: 0.1,
      }
    );

    if (messageRef.current) {
      observer.observe(messageRef.current);
    }

    return () => {
      if (messageRef.current) {
        observer.unobserve(messageRef.current);
      }
    };
  }, [data]);

  return (
    <li ref={messageRef}>
      ...
    </li>
  )
}
```

</details>

---

<br/>

### ëª¨ë‹¬ ê´€ë¦¬

> `Why?`
>
> í”„ë¡œì íŠ¸ì—ì„œ ë‹¤ì–‘í•œ ìœ í˜•ì˜ ëª¨ë‹¬ì´ í•„ìš”í–ˆê¸° ë•Œë¬¸ì—,  
> ëª¨ë‹¬ ì»´í¬ë„ŒíŠ¸ë¥¼ ìœ í˜•ë³„ë¡œ ë Œë”ë§í•˜ê³ , íš¨ìœ¨ì ìœ¼ë¡œ ëª¨ë‹¬ì„ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ë°©ì‹ì´ í•„ìš”í–ˆìŠµë‹ˆë‹¤.

> `How?`
>
> ëª¨ë‹¬ì„ íš¨ê³¼ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ì „ì—­ ìƒíƒœë¡œ ê´€ë¦¬ë˜ëŠ” ëª¨ë‹¬ ìŠ¤íƒì„ ì •ì˜í–ˆìŠµë‹ˆë‹¤.   
> ì›í•˜ëŠ” ëª¨ë‹¬ì„ ìŠ¤íƒì— ì¶”ê°€í•˜ë©´, ì¶”ê°€ëœ ëª¨ë‹¬ì€ switch-case ë¬¸ì„ í†µí•´ ì ì ˆí•œ ëª¨ë‹¬ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë˜ê³ ,   
> ë‹«ê³ ì í•˜ëŠ” ëª¨ë‹¬ì€ ìŠ¤íƒì—ì„œ ì œê±°í•˜ì—¬ ëª¨ë‹¬ ìŠ¤íƒì„ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ í–ˆìŠµë‹ˆë‹¤.
>
> > ğŸ’¡ `modalStackAtom`
> >
> > modalStackAtomì€ ëª¨ë‹¬ ìŠ¤íƒì„ ê´€ë¦¬í•˜ëŠ” atomì…ë‹ˆë‹¤.  
> > í•´ë‹¹ atomì€ ëª¨ë‹¬ ìŠ¤íƒì˜ ê° í•­ëª©ì„ ë°°ì—´ í˜•íƒœë¡œ ì €ì¥í•˜ê³ ,  
> > ê° í•­ëª©ì€ íŠ¹ì • ëª¨ë‹¬ ì»´í¬ë„ŒíŠ¸ì™€ ê·¸ ëª¨ë‹¬ì´ ì‘ë™í•˜ëŠ” ë° í•„ìš”í•œ ì†ì„±ë“¤ì„ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤.

<details>
  <summary>ì½”ë“œë³´ê¸°</summary>

- `Component` - ëª¨ë‹¬ ì»´í¬ë„ŒíŠ¸ì˜ íƒ€ì…ì„ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
React.ComponentType, ë¬¸ìì—´ ë¦¬í„°ëŸ´ íƒ€ì…, null íƒ€ì…ì„ ì •ì˜í•˜ì—¬ íŠ¹ì • ëª¨ë‹¬ ì»´í¬ë„ŒíŠ¸ë¥¼ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- `props` - ëª¨ë‹¬ ì»´í¬ë„ŒíŠ¸ì— ì „ë‹¬ë  ì¶”ê°€ ì†ì„±ë“¤ì…ë‹ˆë‹¤.  
ì‚¬ìš©ì ì •ì˜ ë°ì´í„°ë‚˜ ì½œë°± í•¨ìˆ˜ ë“±ì„ í¬í•¨ì‹œí‚¤ê³ , ì´ë¥¼ ëª¨ë‹¬ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- `selectOptions` - ëª¨ë‹¬ ë‚´ì—ì„œ ì‚¬ìš©ìê°€ ì„ íƒí•  ìˆ˜ ìˆëŠ” ì˜µì…˜ë“¤ì˜ ë°°ì—´ì…ë‹ˆë‹¤.  
ê° í•­ëª©ì€ ë¬¸ìì—´ ë˜ëŠ” nullì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- `actions` - ëª¨ë‹¬ì—ì„œ ì‹¤í–‰ë  ìˆ˜ ìˆëŠ” ì•¡ì…˜(í•¨ìˆ˜)ë“¤ì˜ ë°°ì—´ì…ë‹ˆë‹¤.  
ê° í•­ëª©ì€ í•¨ìˆ˜ ë˜ëŠ” nullì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- `isOpen` - ëª¨ë‹¬ì˜ ì—´ë¦¼/ë‹«í˜ ìƒíƒœë¥¼ ë‚˜íƒ€ë‚´ëŠ” ë¶ˆë¦¬ì–¸ ê°’ì…ë‹ˆë‹¤.  
í•´ë‹¹ ë¶ˆë¦¬ì–¸ ê°’ì„ í†µí•´ side effectë¥¼ ë°œìƒì‹œì¼œ ëª¨ë‹¬ì„ ì—´ê³  ë‹«ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```tsx
import { atom } from "recoil";

export interface ComponentProps {
  closeModal: () => void,
  props: any,
  handleScroll: (e: React.UIEvent<HTMLDivElement>) => void,
  handleScrollLock: () => void,
  selectOptions?: (null | string)[],
  actions?: (null | (() => void))[]
}

export interface ModalStackType {
  Component: React.ComponentType<ComponentProps> | "Toast" | "Loading" | "Alert" | "Popup" | "PhotoView" | null,
  props?: any,
  selectOptions?: (null | string)[],
  actions?: (null | (() => void))[],
  isOpen?: boolean,
}

export const modalStackDefault = [
    {
      Component: null,
      actions: [],
      isOpen: false,
      props: {},
      selectOptions: [],
    }
  ]

export const modalStack = atom<ModalStackType[]>({
  key: "modalStack",
  default: modalStackDefault
});
```

</details>

> > ğŸ’¡ `useModalStack`
> > 
> > ëª¨ë‹¬ ìŠ¤íƒì„ ê´€ë¦¬í•˜ëŠ” ì—¬ëŸ¬ í•¨ìˆ˜ë“¤ì„ ì œê³µí•©ë‹ˆë‹¤.  
> > í•´ë‹¹ í•¨ìˆ˜ë“¤ì„ í†µí•´ ëª¨ë‹¬ì„ ì—´ê³  ë‹«ê±°ë‚˜, ëª¨ë‹¬ì˜ ì†ì„±ì„ ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<details>
  <summary>ì½”ë“œë³´ê¸°</summary>

- `openModal` - ìƒˆë¡œìš´ ëª¨ë‹¬ì„ ìŠ¤íƒì— ì¶”ê°€í•©ë‹ˆë‹¤.

- `closeModal` - ê°€ì¥ ìµœê·¼ì— í™œì„±í™”ëœ ëª¨ë‹¬ì˜ isOpen ë¶ˆë¦¬ì–¸ê°’ì„ falseë¡œ ë³€ê²½í•©ë‹ˆë‹¤.

- `closeModalDirect` - ëª¨ë‹¬ì„ ì¦‰ì‹œ ì œê±°í•©ë‹ˆë‹¤.

- `updateModal` - ê°€ì¥ ìµœê·¼ì— í™œì„±í™”ëœ ëª¨ë‹¬ì˜ ì†ì„±ì„ ì—…ë°ì´íŠ¸ í•©ë‹ˆë‹¤

- `clearModal` - ëª¨ë‹¬ ìŠ¤íƒì„ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.

```tsx
import useBodyScrollLock from "./useBodyScrollLock";
import { useResetRecoilState, useRecoilState, useRecoilValue } from "recoil";
import { modalStack, isModalStackModifiedSelector, inputValue, ComponentProps } from "@/store";
import { produce } from "immer"

const useModalStack = () => {

  const resetInputValueState = useResetRecoilState(inputValue)
  const [modalStackState, setModalStackState] = useRecoilState(modalStack);
  const isModalStackModified = useRecoilValue(isModalStackModifiedSelector);
  const resetModalStack = useResetRecoilState(modalStack);

  const { lockScroll, openScroll } = useBodyScrollLock();

  const { Component: lastComponent } = modalStackState[modalStackState.length - 1];
  
  const openModal = (
    Component: React.ComponentType<ComponentProps> | "Toast" | "Loading" | "Alert" | "Popup" | "PhotoView" | null,
    props?: any,
    selectOptions?: string[],
    actions?: (null | (() => void))[] ): void => {
      const { Component: lastComponent } = modalStackState[modalStackState.length - 1];
      if ( lastComponent !== "Toast" ) {
        setModalStackState((Prev) => [
          ...Prev,
          { isOpen: true, Component, props, selectOptions, actions },
        ]);
        Component !== "Toast" && lockScroll()
      }
  };

  const closeModal = (): void => {
    lastComponent !== "Toast"  && openScroll()
    setModalStackState((Prev) => 
      produce(Prev, draft => {
        const lastElement = draft[draft.length - 1];
        lastElement.isOpen = false;
      })
    );
  };

  const closeModalDirect = () => {
    lastComponent !== "Toast"  && openScroll()
    if (lastComponent !== "Toast" && location.pathname !== "/post/detail") {
      resetInputValueState()
    }
    if (isModalStackModified && modalStackState.length !== 1) {
      setModalStackState((Prev) => {
        const newModalStack = [...Prev];
        newModalStack.pop();
        return newModalStack;
      });
    }
  }

  const updateModal = (newProps): void => {
    if (isModalStackModified && lastComponent !== "Alert" && lastComponent !== "Loading" && lastComponent !== "Toast" && lastComponent !== "PhotoView") {
      setModalStackState((Prev) => {
        const newModalStack = [...Prev];
        const lastIndex = newModalStack.length - 1;
        newModalStack[lastIndex] = {
          ...newModalStack[lastIndex],
          props: typeof newProps === "string" ? newProps : { ...newModalStack[lastIndex].props, ...newProps } 
        };
        return newModalStack;
      });
    }
  };

  const clearModal = () => resetModalStack();

  return { openModal, closeModal, closeModalDirect, updateModal, clearModal };
};

export default useModalStack;
```

</details>

> > ğŸ’¡ `ModalStack`
> >
> > ì „ì—­ ìƒíƒœë¡œ ê´€ë¦¬ë˜ëŠ” ëª¨ë‹¬ ìŠ¤íƒì„ í†µí•´ í™”ë©´ì— ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. 

<details>
  <summary>ì½”ë“œë³´ê¸°</summary>

- `useEffect`  
ëª¨ë‹¬ ìŠ¤íƒ ìƒíƒœê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ ëª¨ë‹¬ì˜ ì—´ë¦¼/ë‹«í˜ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.

- `closeModal`  
ëª¨ë‹¬ì„ ë‹«ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.

- `handleScroll`  
ëª¨ë‹¬ ë‚´ë¶€ ìŠ¤í¬ë¡¤ ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•˜ëŠ” í•¨ìˆ˜ë¡œ ìŠ¤í¬ë¡¤ì´ ìµœìƒë‹¨ì— ë„ë‹¬í–ˆëŠ”ì§€ ì—¬ë¶€ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.

- `switch-case`   
switch-case ë¬¸ì„ í™œìš©í•˜ì—¬ modal.Componentì— ë”°ë¼ ì ì ˆí•œ ëª¨ë‹¬ ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•©ë‹ˆë‹¤.

```tsx
import { useState, useEffect } from "react";
import useModalStack from "@/hooks/useModalStack";

import { useRecoilValue } from "recoil";
import { modalStack } from "@/store";

import Toast from "./Toast";
import LoadingModal from "./LoadingModal";
import Alert from "./Alert";
import Popup from "./Popup";
import Modal from "./Modal";
import PhotoSingleViewer from "./PhotoSingleViewer";

import { ModalStackType } from "@/store";

const ModalComponent = ({ modal }: { modal: ModalStackType }) => {

  const modalStackState = useRecoilValue(modalStack);

  const [isOpen, setIsOpen] = useState<boolean>(false);
  const [isScrolledToTop, setIsScrolledToTop] = useState<boolean>(true);

  const { Component, props, selectOptions, actions } = modal;
  const { closeModalDirect } = useModalStack();

  useEffect(() => {
    const { isOpen } = modalStackState[modalStackState.length - 1];
    if (isOpen) {
      setIsOpen(true)
    } else if (!isOpen) {
      setIsOpen(false)
      const timeoutId = setTimeout(() => {
        closeModalDirect()
      }, 400)
      return () => {
        clearTimeout(timeoutId)
      }
    }
  }, [modalStackState]);

  const closeModal = () => {
    setIsOpen(false)
    setTimeout(() => {
      closeModalDirect()
    }, 400)
  }

  const handleScroll = (e: React.UIEvent<HTMLDivElement>) => {
    if (e.currentTarget.scrollTop <= 0) {
      setIsScrolledToTop(true)
    } else {
      setIsScrolledToTop(false)
    }
  }

  const handleScrollLock = () => {
    setIsScrolledToTop(false)
  }

  if (!Component) {
    return null;
  }

  switch (Component) {
    case "Toast":
      return <Toast isOpen={isOpen} closeModal={closeModal} props={props} />
    case "Loading":
      return <LoadingModal isOpen={isOpen} props={props} />
    case "Alert":
      return <Alert isOpen={isOpen} closeModal={closeModal} props={props} selectOptions={selectOptions} actions={actions} />
    case "Popup":
      return (
        <Popup isOpen={isOpen} closeModal={closeModal} title={props.title}>
          <props.component closeModal={closeModal} props={props.props} />
        </Popup>
      );
    case "PhotoView":
      return <PhotoSingleViewer isOpen={isOpen} closeModal={closeModal} props={props} />
    default:
      return (
        <Modal isOpen={isOpen} closeModal={closeModal} props={props} isScrolledToTop={isScrolledToTop}>
          <Component closeModal={closeModal} props={props} handleScroll={handleScroll} handleScrollLock={handleScrollLock} />
        </Modal>
      )
  }
};

const ModalStack = () => {
  const modalStackState = useRecoilValue(modalStack);

  return (
    <>
      {modalStackState.map((modal, index) => (
        <ModalComponent key={index} modal={modal} />
      ))}
    </>
  );
};

export { ModalStack };
```

</details>

---

<br/>

### ìŠ¤ì™€ì´í”„ íš¨ê³¼ ë¶„ê¸°ì²˜ë¦¬

> `Why?`
>
> ì›¹ ê°œë°œ ê¸°ìˆ ë¡œ ì•±ì„ ê°œë°œí•˜ë©´ì„œ, 
> í„°ì¹˜ ê¸°ë°˜ì˜ ëª¨ë°”ì¼ í™˜ê²½ì— ì í•©í•˜ê²Œ ì„¤ê³„í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤.   
> íŠ¹íˆ, ìŠ¤ì™€ì´í”„ ë™ì‘ì€ ì‚¬ìš©ìê°€ ì§ê´€ì ìœ¼ë¡œ ì•±ì„ íƒìƒ‰í•˜ê³  ìƒí˜¸ì‘ìš©í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ê¸° ë•Œë¬¸ì—,  
> ì´ë¥¼ ì¤‘ì ì ìœ¼ë¡œ ê³ ë ¤í•˜ì—¬ ì‚¬ìš©ìì˜ í¸ì˜ì„±ê³¼ ì•±ì˜ ì‚¬ìš©ì„±ì„ ê·¹ëŒ€í™”í•˜ê³ ì í•˜ì˜€ìŠµë‹ˆë‹¤.

> `How?`
>
> ì‚¬ìš©ìì˜ í„°ì¹˜ ì‹œì‘ ìœ„ì¹˜, ì´ë™ ìœ„ì¹˜, ì¢…ë£Œ ìœ„ì¹˜ì— ë”°ë¼ ë¶„ê¸° ì²˜ë¦¬ë¥¼ í†µí•´ ëª¨ë‹¬ ë™ì‘ì„ ì œì–´í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ,  
> ìŠ¤ì™€ì´í”„ ë™ì‘ì„ í†µí•´ ëª¨ë‹¬ì„ ì—´ê³  ë‹«ê±°ë‚˜ ëª¨ë‹¬ì˜ ë†’ì´ë¥¼ ì¡°ì ˆí•˜ëŠ” ê²ƒì€ ë¬¼ë¡ ,   
> ì´ë¯¸ì§€ë¥¼ ìŠ¤ì™€ì´í”„í•˜ê±°ë‚˜, ë¦¬ìŠ¤íŠ¸ í•­ëª©ì„ ì¡°ì‘í•˜ê±°ë‚˜, ìŠ¤ì™€ì´í”„í•˜ì—¬ ìƒˆë¡œê³ ì¹¨í•˜ëŠ” ë“± ì‚¬ìš©ìì˜ ì˜ë„ì— ë§ëŠ” ë°˜ì‘ì„ ì œê³µí•˜ë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

<details>
<summary>ì½”ë“œë³´ê¸°</summary>

- `sliderRef` - ìŠ¬ë¼ì´ë”ë¥¼ ì°¸ì¡°í•©ë‹ˆë‹¤.

- `backdropRef` - ìŠ¬ë¼ì´ë” ë’¤ì˜ ë°°ê²½ì„ ì°¸ì¡°í•©ë‹ˆë‹¤.

- `startY` - í„°ì¹˜ë‚˜ ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸ê°€ ì‹œì‘ëœ Y ì¢Œí‘œë¥¼ ì €ì¥í•©ë‹ˆë‹¤.

- `isOpenMore` - ëª¨ë‹¬ì´ í™•ì¥ ë˜ì—ˆëŠ”ì§€ ì—¬ë¶€ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.

- `isMoving` - ìŠ¬ë¼ì´ë”ê°€ ì›€ì§ì´ê³  ìˆëŠ”ì§€ ì—¬ë¶€ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.

- `startTouchTime` - í„°ì¹˜ê°€ ì‹œì‘ëœ ì‹œê°„ì„ ì €ì¥í•©ë‹ˆë‹¤.

- `isScrolledToTop` - ìŠ¬ë¼ì´ë”ê°€ ìµœìƒë‹¨ì— ìˆëŠ”ì§€ ì—¬ë¶€ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.  
ìµœìƒë‹¨ì— ìˆëŠ” ê²½ìš° ìŠ¬ë¼ì´ë”ì˜ transformì„ ì„¤ì • ê°€ëŠ¥í•˜ê²Œ í•˜ì—¬ ëª¨ë‹¬ì„ ë‹«ëŠ” ë™ì‘ê¹Œì§€ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.

- `handleTouchStart` - í„°ì¹˜ë‚˜ ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸ê°€ ì‹œì‘ë  ë•Œ í˜¸ì¶œë©ë‹ˆë‹¤.  
ì´ë²¤íŠ¸ê°€ ì‹œì‘ëœ Y ì¢Œí‘œì™€ í„°ì¹˜ê°€ ì‹œì‘ëœ ì‹œê°„ì„ ì €ì¥í•©ë‹ˆë‹¤.

- `handleTouchMove` - í„°ì¹˜ë‚˜ ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸ê°€ ì›€ì§ì¼ ë•Œ í˜¸ì¶œë©ë‹ˆë‹¤.  
í˜„ì¬ Y ì¢Œí‘œì™€ ì‹œì‘ Y ì¢Œí‘œì˜ ì°¨ì´ë¥¼ ê³„ì‚°í•˜ì—¬ ìŠ¬ë¼ì´ë”ì˜ transform ë˜ëŠ” heightë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. 

- `handleTouchEnd` - í„°ì¹˜ë‚˜ ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸ê°€ ëë‚  ë•Œ í˜¸ì¶œë©ë‹ˆë‹¤.  
ì¢…ë£Œ Y ì¢Œí‘œì™€ ì‹œì‘ Y ì¢Œí‘œì˜ ì°¨ì´ ë° í„°ì¹˜ê°€ ì‹œì‘ëœ ì‹œê°„ê³¼ì˜ ê²½ê³¼ ì‹œê°„ì„ ê¸°ì¤€ìœ¼ë¡œ  
ëª¨ë‹¬ì„ í™•ì¥í•˜ê±°ë‚˜ ë‹«ê±°ë‚˜ ì—´ë¦¬ëŠ” ë™ì‘ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

```tsx
import { useState, useRef } from "react";

interface ModalProps {
  isOpen: boolean,
  props?: { isHeightAuto: boolean }
  closeModal: () => void,
  isScrolledToTop: boolean,
  children: React.ReactNode
}

const Modal = ({ isOpen, props, closeModal, isScrolledToTop, children }: ModalProps) => {

  const [startY, setStartY] = useState<number | null>(null);
  const [isMoving, setIsMoving] = useState<boolean>(false);
  const [isOpenMore, setIsOpenMore] = useState<boolean>(false);
  const [startTouchTime, setStartTouchTime] = useState<number>(0);

  const backdropRef = useRef<HTMLDivElement | null>(null);
  const sliderRef = useRef<HTMLDivElement | null>(null);

  const isHeightAuto = props?.isHeightAuto;

  const handleTouchStart = (e: React.TouchEvent | React.MouseEvent) => {
    if ("touches" in e) {
      setStartY(e.touches[0].clientY);
    } else {
      setStartY(e.clientY);
    }

    setIsMoving(true);
    setStartTouchTime(Date.now());
  };

  const handleTouchMove = (e: React.TouchEvent | React.MouseEvent) => {
    if (isHeightAuto || startY === null) return;

    let currentY: number
    if ("touches" in e) {
      currentY = e.touches[0].clientY;
    } else {
      currentY = e.clientY;
    }
    const subtract = Math.abs(startY - currentY);
    const sliderRefCurrent = sliderRef.current;

    if (sliderRefCurrent && backdropRef.current) {
      const transformPercentage = (subtract / sliderRefCurrent.clientWidth) * 100;
      if (startY < currentY && !isOpenMore) {
        sliderRefCurrent.style.transform = `translateY(${transformPercentage}%)`;
        backdropRef.current.style.opacity = "0";
      } else if (startY < currentY && isOpenMore) {
        sliderRefCurrent.style.height = `calc(100% - ${subtract}px)`;
      } else if (startY > currentY && isOpenMore) {
        sliderRefCurrent.style.height = "100%";
      }
      else if (startY > currentY) {
        sliderRefCurrent.style.height = `calc(75% + ${subtract}px)`;
      }
    }
  }

  const handleTouchEnd = (e: React.TouchEvent | React.MouseEvent) => {
    if (isHeightAuto || startY === null) return;
    let endY: number
    if ("changedTouches" in e) {
      endY = e.changedTouches[0].clientY;
    } else {
      endY = e.clientY;
    }

    const subtract = Math.abs(startY - endY);
    const sliderRefCurrent = sliderRef.current;
    const elapsedTime = Date.now() - startTouchTime;

    let transformPercentage: number = 0;
    if (sliderRefCurrent) {
      transformPercentage = (subtract / sliderRefCurrent.clientWidth) * 100;
    }

    if (sliderRefCurrent) {
      if (startY < endY && !isOpenMore && elapsedTime < 100) {
        setIsMoving(false);
        closeModal();
      } else if (startY < endY && !isOpenMore && transformPercentage > 75 / 2) {
        setIsMoving(false);
        closeModal();
      } else if (backdropRef.current && startY < endY) {
        setIsMoving(false);
        setIsOpenMore(false)
        sliderRefCurrent.style.transform = `translateY(0%)`;
        backdropRef.current.style.opacity = "1";
      } else if (backdropRef.current && startY > endY) {
        setIsMoving(false);
        setIsOpenMore(true)
        sliderRefCurrent.style.transform = `translateY(0%)`;
        backdropRef.current.style.opacity = "1";
      } else {
        sliderRefCurrent.style.transform = `translateY(0%)`;
      }
      setStartY(null);
    }
  }


  return (
    <div className="z-40 fixed left-0 top-0 h-full w-screen">
      <div
        className={`z-50 absolute bottom-0 w-full rounded-t-[10px] bg-background flex flex-col items-center transform ${isOpen ? "ease-out" : "ease-in"}`} style={{
          transform: `${isOpen ? "translateY(0%)" : "translateY(100%)"}`,
          transition: `${isMoving ? "" : ".4s"}`,
          height: `${isHeightAuto ? "auto" : isOpenMore ? "100%" : "75%"}`,
        }}
        ref={sliderRef}
      >
        <div className="pt-[35px] w-full h-full"
          onClick={() => setIsMoving(false)}
          onTouchStart={handleTouchStart}
          onTouchMove={handleTouchMove}
          onTouchEnd={handleTouchEnd}
          onMouseDown={handleTouchStart}
          onMouseMove={handleTouchMove}
          onMouseUp={handleTouchEnd}
        >
          <div className="absolute top-[15px] left-1/2 -translate-x-1/2 w-[30px] h-[5px] bg-gray-old rounded-full m-auto"></div>
          <div
            className="w-full h-full flex flex-col overflow-y-scroll"
            onTouchStart={(e) => {
              e.stopPropagation()
              if (isScrolledToTop) {
                handleTouchStart(e)
              }
            }}
            onTouchMove={(e) => {
              e.stopPropagation()
              if (startY === null || isScrolledToTop === false) return;

              const currentY = e.touches[0].clientY;
              const subtract = Math.abs(startY - currentY);
              const sliderRefCurrent = sliderRef.current;

              if (sliderRefCurrent && backdropRef.current) {
                const transformPercentage = (subtract / sliderRefCurrent.clientWidth) * 100;
                if (startY < currentY && !isOpenMore && isScrolledToTop) {
                  sliderRefCurrent.style.transform = `translateY(${transformPercentage}%)`;
                  backdropRef.current.style.opacity = "0";
                } else if (startY < currentY && isOpenMore) {
                  sliderRefCurrent.style.height = `calc(100% - ${subtract}px)`;
                }
              }
            }}
            onTouchEnd={(e) => {
              e.stopPropagation()
              if (startY === null || isScrolledToTop === false) return;

              const endX = e.changedTouches[0].clientY;
              const subtract = Math.abs(startY - endX);
              const sliderRefCurrent = sliderRef.current;
              const elapsedTime = Date.now() - startTouchTime;

              let transformPercentage: number = 0;
              if (sliderRefCurrent) {
                transformPercentage = (subtract / sliderRefCurrent.clientWidth) * 100;
              }

              if (sliderRefCurrent) {
                if (startY < endX && !isOpenMore && subtract > 20 && elapsedTime < 100) {
                  setIsMoving(false);
                  closeModal();
                } else if (startY < endX && !isOpenMore && transformPercentage > 75 / 2) {
                  setIsMoving(false);
                  closeModal();
                } else if (backdropRef.current && startY < endX) {
                  setIsMoving(false);
                  setIsOpenMore(false)
                  sliderRefCurrent.style.transform = `translateY(0%)`;
                  backdropRef.current.style.opacity = "1";
                } else {
                  sliderRefCurrent.style.transform = `translateY(0%)`;
                }
                setStartY(null);
              }
            }}
          >
            {children}
          </div>
        </div>
      </div >
      <div
        className={`z-40 absolute top-0 left-0 h-dvh w-screen backdrop-blur-sm ${isOpen ? "ease-out" : "ease-in"}`}
        style={{
          background: "rgba(255,255,255, .1)",
          opacity: `${isOpen ? 1 : 0}`,
          transition: ".4s",
        }}
        ref={backdropRef}
        onClick={(e) => {
          e.stopPropagation()
          setIsMoving(false);
          closeModal()
        }}
      >
      </div >
    </div>
  );
}

export default Modal
```

</details>

---

<br/>

### í˜ì´ì§€ ì „í™˜ íš¨ê³¼

> `Why?`
>
> ì¼ë°˜ì ì¸ ì•±ì—ì„œ ë¶€ë“œëŸ¬ìš´ í™”ë©´ ì „í™˜ì´ ì—†ë‹¤ë©´,   
> ì‚¬ìš©ìëŠ” í˜ì´ì§€ ì „í™˜ì´ ê°‘ì‘ìŠ¤ëŸ½ê²Œ ëŠê»´ì ¸ í˜¼ë€ìŠ¤ëŸ½ê±°ë‚˜ ë§¥ë½ì„ ìƒì„ ê°€ëŠ¥ì„±ì´ ìˆê¸°ë•Œë¬¸ì—
> ì‚¬ìš©ìê°€ ì´ì „ í˜ì´ì§€ì™€ í˜„ì¬ í˜ì´ì§€ ê°„ì˜ ê´€ê³„ë¥¼ ì§ê´€ì ìœ¼ë¡œ ì´í•´í•˜ëŠ” ë° ë„ì›€ì„ ì¤„ ìˆ˜ ìˆë„ë¡ í•˜ê³ ì í•˜ì˜€ìŠµë‹ˆë‹¤. 

> `How?`
>
> react-transition-group ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ í˜ì´ì§€ ì „í™˜ ì‹œ ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼ë¥¼ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.  
> TransitionGroupê³¼ CSSTransition ë¼ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ í™œìš©í•˜ì—¬ ê° í˜ì´ì§€ ì „í™˜ì— ëŒ€í•´ í´ë˜ìŠ¤ëª…ì„ ë™ì ìœ¼ë¡œ ì ìš©í•˜ê³ ,  
> í•´ë‹¹ í´ë˜ìŠ¤ëª…ì— ë”°ë¼ CSSë¥¼ í†µí•´ ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼ë¥¼ ë¶€ì—¬í–ˆìŠµë‹ˆë‹¤.

<details>
  <summary>ì½”ë“œë³´ê¸°</summary>

- `TransitionGroup` - ìì‹ ìš”ì†Œì˜ ì „í™˜ì„ ê´€ë¦¬í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤.  
ìì‹ ìš”ì†Œê°€ ì¶”ê°€ë˜ê±°ë‚˜ ì œê±°ë  ë•Œ ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼ë¥¼ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
childFactory ì†ì„±ì€ ê° ìì‹ ìš”ì†Œì— ì¶”ê°€ì ì¸ ì†ì„±ì„ ì„¤ì •í•  ìˆ˜ ìˆëŠ” í•¨ìˆ˜ë¡œ,  
classNames ì†ì„±ì„ ì¶”ê°€í•˜ì—¬ í´ë˜ìŠ¤ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- `CSSTransition` - ê°œë³„ ìì‹ ìš”ì†Œì— ëŒ€í•´ ì• ë‹ˆë©”ì´ì…˜ì„ ì ìš©í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤.  
key ì†ì„±ì„ í†µí•´ ë¼ìš°íŠ¸ ê²½ë¡œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì„¤ì •í•˜ì—¬    
ë¼ìš°íŠ¸ê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ ì• ë‹ˆë©”ì´ì…˜ì´ ì ìš©ë˜ë„ë¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
timeout ì†ì„±ì„ í†µí•´ ì• ë‹ˆë©”ì´ì…˜ ì§€ì† ì‹œê°„ì„ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- `routeDirectionValueState`
routeDirectionValueState.directionì´ ë¹ˆ ë¬¸ìì—´ì´ ì•„ë‹Œ ê²½ìš°,  
ì„¤ì •ëœ ì „í™˜ ë°©í–¥ì— ë”°ë¼ ì• ë‹ˆë©”ì´ì…˜ í´ë˜ìŠ¤ë¥¼ ë™ì ìœ¼ë¡œ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```tsx
import React from "react";
import { useRecoilState } from "recoil";
import { routeDirectionValue } from "@/store";

import { TransitionGroup, CSSTransition } from "react-transition-group";

interface RouteState {
  pathname: string
  state: {
    direction: "next" | "prev" | "up" | "down" | "fade";
  },
}

interface RouteTransitionProps {
  location: RouteState,
  children: React.ReactNode
}

const RouteTransition = ({ location, children }: RouteTransitionProps) => {

  const [routeDirectionValueState, setRouteDirectionValueState] = useRecoilState(routeDirectionValue)

  return (
    <TransitionGroup
      childFactory={(child) => {
        return React.cloneElement(child, {
          classNames:
            routeDirectionValueState.direction !== "" ? (
              routeDirectionValueState.direction === "next" && "navigate-next" ||
              routeDirectionValueState.direction === "up" && "navigate-up" ||
              routeDirectionValueState.direction === "prev" && "navigate-prev" ||
              routeDirectionValueState.direction === "down" && "navigate-down" ||
              routeDirectionValueState.direction === "fade" && "navigate-fade"
            ) : (
              location.state?.direction === "next" && "navigate-next" ||
              location.state?.direction === "up" && "navigate-up" ||
              location.state?.direction === "prev" && "navigate-prev" ||
              location.state?.direction === "down" && "navigate-down" ||
              location.state?.direction === "fade" && "navigate-fade"
            )
        });
      }}
    >
      <CSSTransition
        key={location.pathname}
        timeout={300}
      >
        <div className="w-full overflow-x-clip">
          {children}
        </div>
      </CSSTransition>
    </TransitionGroup>
  );
};

export default RouteTransition;
```

```tsx
import { Routes, useLocation } from "react-router-dom";
import RouteTransition from "./RouteTransition";

const App = () => {

  const location = useLocation();

  return (
    <RouteTransition location={location}>
      <Routes location={location}>
        ...
      </Routes>
    </RouteTransition>
  )
}
```

```css
.slide-fade-enter,
.navigate-fade-enter {
  position: absolute;
  height: 100dvh;
  opacity: 0;
  transform: translateY(50%);
}

.slide-fade-enter-active,
.navigate-fade-enter-active {
  opacity: 1;
  transform: translateY(0);
  transition: opacity 300ms ease-in-out, transform 300ms ease-in-out;
}

.slide-fade-exit,
.navigate-fade-exit {
  position: absolute;
  height: 100dvh;
  opacity: 1;
  transform: translateY(0%);
}

.slide-fade-exit-active,
.navigate-fade-exit-active {
  opacity: 0;
  transform: translateY(50%);
  transition: opacity 300ms ease-in-out, transform 300ms ease-in-out;
}

...
```

</details>

---

<br/>

### ìƒˆë¡œê³ ì¹¨

> `Why?`
>
> ì•±ì˜ íŠ¹ì„±ìƒ ë°ì´í„°ê°€ ì‹¤ì‹œê°„ìœ¼ë¡œ ë³€ë™ë˜ë©°,  
> ìµœì‹  ë°ì´í„°ë¥¼ ìœ ì§€í•˜ëŠ” ê²ƒì´ ë§¤ìš° ì¤‘ìš”í•˜ê¸°ë•Œë¬¸ì—,   
> ë°ì´í„°ë¥¼ ë‹¤ì‹œ ê°€ì ¸ì˜¤ëŠ” (refetch) ê¸°ëŠ¥ì´ í•„ìˆ˜ì ì´ë¼ê³  ì—¬ê²¼ìŠµë‹ˆë‹¤.

> `How?`
>
> ì‚¬ìš©ìì˜ í„°ì¹˜ ë° ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸ë¥¼ ê°ì§€í•˜ì—¬   
> í™”ë©´ ìƒë‹¨ì—ì„œ ì•„ë˜ë¡œ ìŠ¤ì™€ì´í”„í•˜ëŠ” ë™ì‘ì„ í†µí•´ ë°ì´í„°ë¥¼ ë‹¤ì‹œ ë¶ˆëŸ¬ì˜¤ëŠ” ìƒˆë¡œê³ ì¹¨ ê¸°ëŠ¥ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. 

<details>
  <summary>ì½”ë“œë³´ê¸°</summary>

> ìŠ¤í¬ë¡¤ ìœ„ì¹˜ê°€ ìƒë‹¨ì— ìˆë‹¤ë©´  
> í„°ì¹˜ë‚˜ ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸ê°€ ì‹œì‘ë  ë•Œ ì‹œì‘ ìœ„ì¹˜ë¥¼ ì €ì¥í•˜ê³ ,   
> í„°ì¹˜ë‚˜ ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸ê°€ ëë‚  ë•Œ ì‚¬ìš©ìê°€ í™”ë©´ì„ ì–¼ë§ˆë‚˜ ëŒì–´ë‚´ë ¸ëŠ”ì§€ ê³„ì‚°í•©ë‹ˆë‹¤.
> 
> ì‚¬ìš©ìê°€ í™”ë©´ì„ ì¼ì • ê±°ë¦¬ ì´ìƒ ëŒì–´ë‚´ë ¸ë‹¤ë©´,   
> refetch í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ ë°ì´í„°ë¥¼ ë‹¤ì‹œ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.  
> ë¡œë”© ìƒíƒœë¥¼ í†µí•´ ë¡œë”©ì´ ì¢…ë£Œë˜ë©´ ë¡œë”© ì»´í¬ë„ŒíŠ¸ì˜ ìœ„ì¹˜ë¥¼ ì´ˆê¸°í™”ì‹œí‚µë‹ˆë‹¤.

```tsx
import { useState, useEffect, useRef } from "react"
import useScrollTop from "@/hooks/useScrollTop"

import Loader from "./Loader"

interface ScrollRefreshContainerProps {
  children: React.ReactNode,
  isLoading: boolean,
  refetch: () => void
}

const ScrollRefreshContainer = ({ children, isLoading, refetch }: ScrollRefreshContainerProps) => {
  const [isVisible, setIsVisible] = useState<boolean>(false);
  const [isRefresh, setIsRefresh] = useState<boolean>(false);
  const [startY, setStartY] = useState<number | null>(null);
  const [isMoving, setIsMoving] = useState<boolean>(false);

  const isTop = useScrollTop()

  const scrollTop = window.scrollY || document.documentElement.scrollTop;


  const refreshRef = useRef<HTMLDivElement | null>(null);

  const handleTouchStart = (e: React.TouchEvent | React.MouseEvent) => {
    if (scrollTop !== 0 && !isTop) return;
    if ("touches" in e) {
      setStartY(e.touches[0].clientY);
    } else {
      setStartY(e.clientY);
    }
    setIsVisible(true)
    setIsMoving(true);
  };

  const handleTouchMove = (e: React.TouchEvent | React.MouseEvent) => {
    if (scrollTop !== 0 && !isTop || startY === null) return;
    let currentY: number
    if ("touches" in e) {
      currentY = e.touches[0].clientY;
    } else {
      currentY = e.clientY;
    }
    const subtract = Math.abs(startY - currentY);
    const refreshRefCurrent = refreshRef.current;


    if (refreshRefCurrent) {
      const transformPercentage = (subtract / refreshRefCurrent.clientWidth) * 100;
      if (startY < currentY) {
        refreshRefCurrent.style.transform = `translate(-50%, ${transformPercentage <= 120 ? transformPercentage : 120}%)`;
      } else if (startY > currentY) {
        refreshRefCurrent.style.transform = `translate(-50%, ${-transformPercentage <= 0 ? 0 : transformPercentage}%)`;
      }
    }
  }

  const handleTouchEnd = (e: React.TouchEvent | React.MouseEvent) => {
    if (scrollTop !== 0 && !isTop || startY === null) return;
    let endY: number
    if ("changedTouches" in e) {
      endY = e.changedTouches[0].clientY;
    } else {
      endY = e.clientY;
    }
    const subtract = Math.abs(startY - endY);

    const refreshRefCurrent = refreshRef.current;

    let transformPercentage: number = 0;
    if (refreshRefCurrent) {
      transformPercentage = (subtract / refreshRefCurrent.clientWidth) * 100;
    }
    if (refreshRefCurrent && startY < endY && transformPercentage > 50) {
      setIsMoving(false)
      setIsRefresh(true)
      setTimeout(() => {
        refreshRefCurrent.style.transform = "translate(-50%, 120%)";
        refetch()
      }, 0)
    } else {
      setIsMoving(false)
      setTimeout(() => {
        refreshRefCurrent.style.transform = "translate(-50%, 0%)";
      }, 0)
    }
    setStartY(null)
  };

  useEffect(() => {
    if (!isLoading) {
      refreshRef.current.style.transform = "translate(-50%, 0%)";
      setTimeout(() => {
        setIsVisible(false)
        setIsRefresh(false)
      }, 300)
    }
  }, [isLoading])

  return (
    <div
      className="w-full h-full"
      onTouchStart={handleTouchStart}
      onTouchMove={handleTouchMove}
      onTouchEnd={handleTouchEnd}
      onMouseDown={handleTouchStart}
      onMouseMove={handleTouchMove}
      onMouseUp={handleTouchEnd}
    >
      <div className={`${isMoving ? "" : "transition-transform duration-300 ease-in-out"} ${isVisible ? "opacity-100" : "opacity-0"} h-[50px] w-[100px] rounded-lg bg-white fixed left-1/2 top-[-50px] z-50`} ref={refreshRef}>
        <div className={`absolute-center w-[50px] transition duration-100 ${isRefresh ? "opacity-100" : "opacity-0"}`}>
          <Loader isSmallUse={true} color={"black"} />
        </div>
      </div>
      {children}
    </div >
  );
}

export default ScrollRefreshContainer
```

```tsx
import PostService from "@/services/postService";
import ScrollRefreshContainer from "./ScrollRefreshContainer"

const PostPage = () => {

const { ReadPostAllPaged } = PostService()
  const { data, isFetching, refetch } = ReadPostAllPaged()

  return (
    <ScrollRefreshContainer 
      isLoading={isFetching} 
      refetch={() => {
        refetch()
      }}>
      ...
    </ScrollRefreshContainer>
  )
}
```

</details>

---

<br/>

### FCMì„ í™œìš©í•œ ì‹¤ì‹œê°„ í‘¸ì‹œ ì•Œë¦¼ êµ¬í˜„

> `Why`
>
> ì‚¬ìš©ìê°€ ì•±ì„ ì‹¤í–‰í•˜ì§€ ì•Šê³ ë„ ì‹¤ì‹œê°„ìœ¼ë¡œ ì¤‘ìš”í•œ ì •ë³´ë¥¼ ì „ë‹¬í•˜ê³   
> ì•±ì˜ ì°¸ì—¬ì„±ì„ ë†’ì´ê¸° ìœ„í•´ FCM(Firebase Cloud Messaging)ì„ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.

> `How`
>
> ì‚¬ìš©ìì˜ ë™ì˜ë¥¼ ì–»ì–´ ì•Œë¦¼ ê¶Œí•œì„ ìš”ì²­í•©ë‹ˆë‹¤.   
> ì•Œë¦¼ ê¶Œí•œì´ ë¶€ì—¬ë˜ë©´ FCMì„ í†µí•´ ê¸°ê¸° í† í°ì„ ë°›ì•„ì™€ì„œ Firestoreì— ì €ì¥í•©ë‹ˆë‹¤.   
> ì´í›„, ì €ì¥ëœ í† í°ê³¼ í•¨ê»˜ ì•Œë¦¼ì˜ ë”¥ë§í¬, ì œëª©, ë³¸ë¬¸ ë“±ì˜ ì •ë³´ë¥¼   
> APIë¥¼ í†µí•´ ì „ì†¡í•˜ì—¬ ì‚¬ìš©ìì—ê²Œ í‘¸ì‹œ ì•Œë¦¼ì„ ì „ë‹¬í•˜ë„ë¡ í–ˆìŠµë‹ˆë‹¤.

<details>
  <summary>ì½”ë“œë³´ê¸°</summary>

```tsx
import { getToken } from "firebase/messaging";
import { messaging } from "@/firebase/config";

import useFirestoreUpdate from "@/hooks/useFirestoreUpdate";
import getAccountId from "./getAccountId";

const NotificationPermission = (isUpdateToken? : boolean) => {
  const accountId = getAccountId();
  const { updateField } = useFirestoreUpdate("users");

  const requestPermission = async () => {
    try {
      const permission = await Notification.requestPermission();

      if (permission === "granted") {
        const token = await getToken(messaging, {
          vapidKey: process.env.REACT_APP_VAPID_KEY,
        });
        updateField(accountId, { deviceToken: token, isAlert: true });
      } else if (permission === "denied" && !isUpdateToken) {
        updateField(accountId, { deviceToken: "off", isAlert: false });
      }
    } catch (error) {
      console.error("ì•Œë¦¼ ê¶Œí•œ ìš”ì²­ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:", error);
    }
  };

  return { requestPermission }
}

export default NotificationPermission;
```

```tsx
const notificationService = (token: string, action: string, title: string, body?: string) => {
  try {
    fetch(`${process.env.REACT_APP_SEND_MESSAGE_API_URL}?token=${token}&action=${action}&title=${title}&body=${body ? body : "none"}&icon=${"none"}`, {
      method: "POST",
    });
  } catch (error) {
    console.error(error);
    throw error;
  }
}

export default notificationService
```

```tsx
notificationService(
  userInfo.deviceToken,
  `chat/${id}`,
  "íšŒì›ë‹˜ì—ê²Œ ë©”ì‹œì§€ë¥¼ ë³´ëƒˆìŠµë‹ˆë‹¤.",
  "hi",
  `image`
)
```

</details>

---

<br/>

<br/>

## íŠ¸ëŸ¬ë¸” ìŠˆíŒ…

<br/>

### ì˜ë„ì¹˜ ì•Šì€ Navigate Back

> `What?`
>
> Navigate Backì„ ìˆ˜í–‰í•  ë•Œ,  
> ì˜ë„í•œ í˜ì´ì§€ë¡œ ì •í™•íˆ ëŒì•„ê°€ì§€ ëª»í•˜ëŠ” ì´ìŠˆê°€ ìˆì—ˆìŠµë‹ˆë‹¤. 
> 
> ì˜ˆë¥¼ ë“¤ì–´, ì‚¬ìš©ìê°€ A í˜ì´ì§€ì—ì„œ B í˜ì´ì§€ë¡œ ì´ë™í•˜ê³  ë‹¤ì‹œ A í˜ì´ì§€ë¡œ ëŒì•„ì˜¨ í›„  
> C í˜ì´ì§€ë¡œ ì´ë™í•œ ë‹¤ìŒ, ë‹¤ì‹œ A í˜ì´ì§€ë¡œ ëŒì•„ì™”ë‹¤ê³  ê°€ì • í–ˆì„ ë•Œ  
> ì´ ìƒí™©ì—ì„œ Navigate Backì„ ìˆ˜í–‰í•˜ë©´   
> ì‚¬ìš©ìëŠ” A í˜ì´ì§€ ì´ì „ìœ¼ë¡œ ëŒì•„ê°€ê¸¸ ê¸°ëŒ€í•  ìˆ˜ ìˆì§€ë§Œ   
> ì‹¤ì œë¡œëŠ”, C í˜ì´ì§€ë¡œ ì´ë™í•˜ëŠ” ë¬¸ì œê°€ ë°œìƒí•©ë‹ˆë‹¤.

> `How?`
>
> ë¸Œë¼ìš°ì € íˆìŠ¤í† ë¦¬ì—ë§Œ ì˜ì¡´í•˜ì§€ ì•Šê³    
> Navigate Back ì„ ìˆ˜í–‰í•  ì‹œ ë¦¬ë‹¤ì´ë ‰íŠ¸í•  URLì„ ì €ì¥í•˜ê³   
> ëª…ì‹œì ìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ í•´ê²°í–ˆìŠµë‹ˆë‹¤.

<br/>

### ì´ì „ í˜ì´ì§€ ìƒíƒœê°’ ì†ì‹¤

> `What?`
>
> ë¸Œë¼ìš°ì € íˆìŠ¤í† ë¦¬ë¥¼ ì´ìš©í•œ Navigate Backì€ ì „ë‹¬ëœ ìƒíƒœê°’ì´ ë³´ì¡´ë˜ì§€ë§Œ,  
> ëª…ì‹œì ìœ¼ë¡œ URLì„ ì„¤ì •í•˜ì—¬ ë¦¬ë‹¤ì´ë ‰íŠ¸í•˜ëŠ” ê²½ìš° ì „ë‹¬ë˜ì—ˆë˜ ìƒíƒœê°€ ë³´ì¡´ë˜ì§€ ì•ŠëŠ” ì´ìŠˆê°€ ìˆì—ˆìŠµë‹ˆë‹¤.

> `How?`
>
> Navigate Backì„ ìˆ˜í–‰í•  ë•Œ ë¦¬ë‹¤ì´ë ‰íŠ¸í•  URLì„ ì €ì¥í•˜ëŠ” ë™ì‹œì—,  
> í•´ë‹¹ í˜ì´ì§€ì—ì„œ ìš”êµ¬ë˜ëŠ” ìƒíƒœê°’ë„ í•¨ê»˜ ì €ì¥í•˜ì—¬   
> ëª…ì‹œì  ë¦¬ë‹¤ì´ë ‰íŠ¸ ì‹œì—ë„ ìƒíƒœê°’ì„ ë³´ì¡´í•  ìˆ˜ ìˆë„ë¡ í–ˆìŠµë‹ˆë‹¤.

<details>
  <summary>ì½”ë“œë³´ê¸°</summary>

> routeDirectionValueState ìƒíƒœë¥¼ í†µí•´ side effectë¥¼ ë°œìƒì‹œí‚¤ë©´ í˜ì´ì§€ ì „í™˜ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.   
> 
> direction ê°’ì´ ë¹„ì–´ ìˆì§€ ì•Šìœ¼ë©´,   
> previousPageUrl ë°°ì—´ì—ì„œ ë§ˆì§€ë§‰ URLì„ ê°€ì ¸ì™€ í•´ë‹¹ URLë¡œ ëª…ì‹œì ìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸í•©ë‹ˆë‹¤.   
> ì´ë•Œ data ë°°ì—´ì—ì„œ ë§ˆì§€ë§‰ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ stateë¡œ ì „ë‹¬í•©ë‹ˆë‹¤. 
> 
> ë§Œì•½ previousPageUrlê³¼ data ë°°ì—´ì´ ë¹„ì–´ ìˆë‹¤ë©´,   
> ê¸°ë³¸ì ìœ¼ë¡œ navigate(-1)ì„ í˜¸ì¶œí•˜ì—¬ ë¸Œë¼ìš°ì € íˆìŠ¤í† ë¦¬ì˜ ì´ì „ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤. 
> 
> í˜ì´ì§€ ì „í™˜ì´ ì™„ë£Œë˜ë©´, previousPageUrlê³¼ data ë°°ì—´ì—ì„œ ë§ˆì§€ë§‰ ê°’ì„ ì œê±°í•˜ê³  direction ê°’ì„ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.

```tsx
import { atom } from "recoil";

interface routeDirectionValueType {
  direction: "next" | "prev" | "up" | "down" | "fade" | "",
  previousPageUrl: string[]
  data: any[],
}

export const routeDirectionValue = atom<routeDirectionValueType>({
  key: "routeTransitionDirection",
  default: {direction: "", previousPageUrl: [], data: []},
});
```

```tsx
import { routeDirectionValue } from "@/store";

const RouteTransition = ( ... ) => {

  const [routeDirectionValueState, setRouteDirectionValueState] = useRecoilState(routeDirectionValue)

  useEffect(() => {
    if (routeDirectionValueState.direction !== "") {
      const previousPageUrl = routeDirectionValueState.previousPageUrl
      const data = routeDirectionValueState.data

      if (previousPageUrl.length !== 0) {
        navigate(
          previousPageUrl[previousPageUrl.length - 1], 
          { 
            state: data[data.length - 1] 
            ? JSON.parse(JSON.stringify(data[data.length - 1])) 
            : {} 
          }
        )
      } else {
        navigate(-1)
      }

      if (data.length === 0 && previousPageUrl.length === 0) {
        setTimeout(() => resetRouteDirectionValueState(), 300)
      } else {
        setTimeout(() => setRouteDirectionValueState(Prev => ({
          ...Prev,
          previousPageUrl: Prev.previousPageUrl.filter((url) => (url !== previousPageUrl[previousPageUrl.length - 1])),
          data: Prev.data.filter((url) => (url !== data[data.length - 1])),
          direction: ""
        })), 300)
      }
    }
  }, [routeDirectionValueState])

  return (...)
}
```

</details>

---

<br/>

### ëª¨ë‹¬ ì ‘ê·¼ ì‹œ ìŠ¤í¬ë¡¤ë¡œ ì¸í•œ ì‚¬ìš©ì„± ì €í•˜

> `What?`
>
> ëª¨ë‹¬ì´ ì—´ë ¸ì„ ë•Œ,   
> ëª¨ë‹¬ ìƒìœ„ ìš”ì†Œì˜ ìŠ¤í¬ë¡¤ì´ ê°€ëŠ¥í•˜ì—¬  
> ìŠ¤í¬ë¡¤ ì‹œ ìƒìœ„ ìš”ì†Œì˜ ìŠ¤í¬ë¡¤ë„ í•¨ê»˜ ì›€ì§ì´ë©´ì„œ ëª¨ë‹¬ê³¼ ìƒí˜¸ì‘ìš©í•˜ëŠ” ë™ì•ˆ ì‚¬ìš©ì„±ì— ë¬¸ì œê°€ ë˜ëŠ” ì´ìŠˆê°€ ìˆì—ˆìŠµë‹ˆë‹¤.

> `How?`
>
> ëª¨ë‹¬ì´ ì—´ë ¸ì„ ë•Œ,  
> í˜„ì¬ ìŠ¤í¬ë¡¤ ìœ„ì¹˜ë¥¼ ì €ì¥í•œ í›„  
> bodyì˜ ìŠ¤íƒ€ì¼ì— fixed ì†ì„±ì„ ì¶”ê°€í•˜ì—¬ ìŠ¤í¬ë¡¤ì„ ë°©ì§€í•˜ì—¬  
> ìŠ¤í¬ë¡¤ ìœ„ì¹˜ë¥¼ ìœ ì§€í•œ ìƒíƒœë¡œ ëª¨ë‹¬ì„ í‘œì‹œí•  ìˆ˜ ìˆë„ë¡ í–ˆìŠµë‹ˆë‹¤.  
> ê·¸ë¦¬ê³  ëª¨ë‹¬ì„ ë‹«ì„ ë•Œ, bodyì— ë¶€ì—¬ëœ ì†ì„±ë“¤ì„ ëª¨ë‘ ì œê±°í•˜ì—¬ ìŠ¤í¬ë¡¤ì„ ë‹¤ì‹œ í—ˆìš©í•˜ë„ë¡ í–ˆìŠµë‹ˆë‹¤.

<details>
  <summary>ì½”ë“œë³´ê¸°</summary>

```tsx
import { useCallback } from "react";

const useBodyScrollLock = () => {
  const lockScroll = useCallback(() => {
    const { body } = document;

    if (!body.getAttribute("scrollY")) {
      const pageY = window.scrollY;
      body.setAttribute("scrollY", pageY.toString());
      body.style.overflow = "hidden";
      body.style.position = "fixed";
      body.style.left = "0px";
      body.style.right = "0px";
      body.style.bottom = "0px";
      body.style.top = `-${pageY}px`;
    }
  }, []);

  const openScroll = useCallback(() => {
    const { body } = document;

    if (body.getAttribute("scrollY")) {
      body.style.removeProperty("overflow");
      body.style.removeProperty("position");
      body.style.removeProperty("top");
      body.style.removeProperty("left");
      body.style.removeProperty("right");
      body.style.removeProperty("bottom");
  
      window.scrollTo(0, Number(body.getAttribute("scrollY")));
  
      body.removeAttribute("scrollY");
    }
  }, [])
  return { lockScroll, openScroll };
}

export default useBodyScrollLock;
```

```tsx
import useBodyScrollLock from "./useBodyScrollLock";

const useModalStack = () => {

  const { lockScroll, openScroll } = useBodyScrollLock();

  const openModal = (): void => {
    lockScroll()
    ...
  };

  const closeModal = (): void => {
    openScroll()
    ...
  }; 

  ...
}
```

</details>

---

<br/>

### CORS ë¬¸ì œ

> `What?`
>
> í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œ Google Places API ì›¹ ì„œë¹„ìŠ¤ë¥¼ í˜¸ì¶œí•  ë•Œ,   
> Google Places API ì„œë²„ê°€ ì‘ë‹µ í—¤ë”ì— Access-Control-Allow-Originì„ í¬í•¨í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì—  
> ë¸Œë¼ìš°ì €ê°€ ë™ì¼ ì¶œì²˜ ì •ì±…ì— ë”°ë¼ ë‹¤ë¥¸ ì¶œì²˜ì˜ ìì›ì— ì ‘ê·¼í•˜ë ¤ëŠ” ì‹œë„ë¥¼ ì°¨ë‹¨í•˜ëŠ” ê³¼ì •ì—ì„œ CORS ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ” ì´ìŠˆê°€ ìˆì—ˆìŠµë‹ˆë‹¤.

> `How?`
>
> AWS Lambdaì™€ API Gatewayë¥¼ í†µí•´ í”„ë¡ì‹œ ì„œë²„ë¥¼ êµ¬ì¶•í•˜ì—¬
> í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì„ ì„œë²„ ì¸¡ í”„ë¡ì‹œ ì„œë²„ë¥¼ í†µí•´ Google Places APIë¡œ ë³´ë‚´ê³ ,  
> í”„ë¡ì‹œ ì„œë²„ê°€ ì‘ë‹µì„ ë°›ì•„ í´ë¼ì´ì–¸íŠ¸ë¡œ ì „ë‹¬í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ CORS ë¬¸ì œë¥¼ í•´ê²°í–ˆìŠµë‹ˆë‹¤.

<details>
  <summary>ì½”ë“œë³´ê¸°</summary>

> fetchë¥¼ ì‚¬ìš©í•˜ì—¬ í”„ë¡ì‹œ ì„œë²„ì— GET ìš”ì²­ì„ ë³´ë‚´ë©´  
> Lambda í•¨ìˆ˜ëŠ” í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì„ ë°›ì•„ Google Places APIë¡œ í”„ë¡ì‹œ ìš”ì²­ì„ ë³´ë‚´ê³ ,    
> ì‘ë‹µ ë°ì´í„°ë¥¼ í´ë¼ì´ì–¸íŠ¸ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤.

```tsx
const readLocationDetail = async (keyword: string) => {
  const response = await fetch(`${process.env.REACT_APP_SEARCH_PLACES_API_URL}?request=details&keyword=${keyword}&apikey=${process.env.REACT_APP_GOOGLE_MAPS_API_KEY}`,
    {
      method: "GET",
    }
  )
  const data = await response.json();
  return data;
}
```

```js
const AWS = require("aws-sdk");
const axios = require("axios");

exports.handler = async (event, context, callback) => {
  try {
    const queryStringParameters = event.queryStringParameters;
    if (queryStringParameters && queryStringParameters.request && queryStringParameters.keyword && queryStringParameters.apikey) {
      const request = queryStringParameters.request
      const keyword = queryStringParameters.keyword
      const apikey = queryStringParameters.apikey

      const response = await axios.get(`https://maps.googleapis.com/maps/api/place/${request}/json?${request === "details" ? "place_id" : "query"}=${keyword}&language=ko&key=${apikey}`);

      callback(null, {
        "statusCode": 200,
        "headers": {
          "Content-Type": "application/json; charset=utf-8",
          "Access-Control-Allow-Origin": "*"
        },
        "body": JSON.stringify(response.data)
      });
    } 
    else {
      callback(null, {
        "statusCode": 400,
        "headers": {
          "Content-Type": "application/json; charset=utf-8",
          "Access-Control-Allow-Origin": "*"
        },
        "body": JSON.stringify({ error: "URLì— ë¬¸ì œê°€ ìˆìŠµë‹ˆë‹¤." })
      });
    }
  } catch (error) {
    callback(null, {
      "statusCode": 500,
      "headers": {
        "Content-Type": "application/json; charset=utf-8",
        "Access-Control-Allow-Origin": "*"
      },
      "body": JSON.stringify({ error: "íŒŒì¼ì„ ì½ì–´ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ ë°œìƒ: " + error.message })
    });
  }
};
```

</details>

<br/>

### ë°ì´í„° íŒ¨ì¹­ ìµœì í™”

> `What?`
>
> ì¼ë¶€ ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì€  
> ë°ì´í„° ê³ ìœ  IDë¥¼ ê°€ì§€ê³  ë”°ë¡œ DBì— ë°°ì—´í˜•íƒœë¡œ ì €ì¥í•œ ë‹¤ìŒ ì´ê²ƒì„ ê°€ì§€ê³  ë³‘ë ¬ ë°ì´í„° íŒ¨ì¹­ í•˜ëŠ” í˜•íƒœ ì˜€ì§€ë§Œ,   
> FireStoreì˜ ë°ì´í„°ê°€ ì¶”ê°€/ì‚­ì œí•˜ëŠ” ê³¼ì •ì—ì„œ ë³„ë„ë¡œ ë°ì´í„°ì— ëŒ€í•œ ê³ ìœ  IDë¥¼ ë³„ë„ë¡œ ì¶”ê°€/ì‚­ì œí•´ì•¼í•˜ëŠ” ë²ˆê±°ë¡œì›€ì´ ìˆì—ˆìŠµë‹ˆë‹¤

> `How?`
>
> ë”°ë¡œ ê³ ìœ  IDë¥¼ ì €ì¥í•˜ì§€ì•Šê³  FireStoreì˜ where ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬   
> ë°ì´í„° íŒ¨ì¹­í•˜ëŠ” ë°©ì‹ì„ í†µí•´ ìš”ì²­ì„ ë‹¨ì¼í™” í•˜ê³  ì „ì²´ì ìœ¼ë¡œ ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì˜ ì–‘ì„ ì¤„ì´ëŠ” ë°©ì‹ìœ¼ë¡œ í•´ê²°í–ˆìŠµë‹ˆë‹¤.
>
> > `ìˆ˜ì • ì „`
> >
> > ì˜ì¡´ì„± ë¦¬ì•¡íŠ¸ ì¿¼ë¦¬(useDependentDataQuery)ë¥¼ í†µí•´ ë³‘ë ¬ ë°ì´í„° íŒ¨ì¹­ì„ í•˜ëŠ” í˜•íƒœë¡œ,  
> > ë³‘ë ¬ ë°ì´í„° íŒ¨ì¹­ì„ ìœ„í•´ í•„ìš”í•œ ê³ ìœ  IDë¥¼ íŠ¹ì • ë°°ì—´ í•„ë“œ ì•ˆì— ì €ì¥í•˜ê³  ê´€ë¦¬í•´ì•¼ í–ˆìŠµë‹ˆë‹¤

<details>
  <summary>ì½”ë“œë³´ê¸°</summary>

```tsx
import { useQueries, QueryCache } from "@tanstack/react-query";

import useDataQuery from "./useDataQuery";

import { QueryOptions } from "./useDataQuery";

interface DependentQueriesResult<T> {
  isLoading: boolean,
  data: T, 
}

const useDependentDataQuery = <T>(
  primaryKey: string, 
  dependentKey: string, 
  dependentDataKeys: string[],
  functions: any, 
  params: ((string | null | any)[])[],
  queryOptions: QueryOptions,
  onSuccess?: () => void,
  onError?: () => void, 
): DependentQueriesResult<T> => {

  const { data: primaryFunctionResults, isSuccess: isSuccessPrimaryQuery } = useDataQuery<any,Error,string[]>(
    primaryKey, 
    () => functions[0](...params[0]), 
    primaryKey => dependentDataKeys.reduce((obj, key) => obj[key], primaryKey), 
    queryOptions
  )

  const dependentQueries = useQueries({
    queries: primaryFunctionResults
      ? primaryFunctionResults.map((primaryFunctionResult) => ({
          queryKey: [dependentKey, primaryFunctionResult],
          queryFn: () => functions[1](...params[1].map(i => i === null ? primaryFunctionResult : i)),
          enabled: isSuccessPrimaryQuery,
          ...queryOptions,
        }))
      : [],
    combine: (results) => {
      return {
        combinedData: results.map((result) => result.data) as T,
        isLoading: results.some((result) => result.isLoading),
        isSuccessDependentQuery: results.every((result) => result.isSuccess),
        isError: results.some((result) => result.isError),
      };
    },
  });

  const queryCache = new QueryCache()
  
  queryCache.subscribe(() => {
    if (dependentQueries.isSuccessDependentQuery) {
      onSuccess && onSuccess()
    } else if (dependentQueries.isError) {
      onError && onError()
    }
  });

  return { 
    isLoading: dependentQueries.isLoading, 
    data: dependentQueries.combinedData 
  };
};

export default useDependentDataQuery;
```

```tsx
import useFirestoreCreate from "@/hooks/useFirestoreCreate";
import { v4 as uuidv4 } from "uuid";

const ReadSchedule = () => {
  const { readDocumentSingle: readDocumentUsers } = useFirestoreRead("users")
  const { readDocumentSingle: readDocumentSchedules } = useFirestoreRead("schedules")
  
  const { data, isLoading } = useDependentDataQuery<ReadDocumentType<SchedulesType>[]>(
    "user", 
    "schedules", 
    ["data", "scheduleIds"], 
    [readDocumentUsers<UsersType>, readDocumentSchedules<SchedulesType>],
    [[accountId], [null]],
    {
      staleTime: Infinity,
      gcTime: Infinity,
    }
  );

  return { data, isLoading }
}

const CreateSchedule = ( ... ) => {
  const { createFieldArray } = useFirestoreCreate("schedules")
  
  const { mutate, isPending } = useDataMutation(
    "schedules",
    async() => {
      await createFieldArray(
        documentId,
        scheduleIds,
        uuidv4()
      )
    },
    onSuccess,
    onError
  )

  return { mutate, isPending }
}
```

</details>

> > `ìˆ˜ì • í›„`
> >
> > íŠ¹ì • í•„ë“œì— ëŒ€í•´ Firestoreì˜ where ì¿¼ë¦¬ë¥¼ í†µí•´ ë°ì´í„°ë¥¼ íŒ¨ì¹­í•˜ëŠ” í˜•íƒœë¡œ ë³€ê²½í•˜ì—¬,  
> > ë³‘ë ¬ ë°ì´í„° íŒ¨ì¹­ ëŒ€ì‹  ê°„ë‹¨í•œ ì¿¼ë¦¬ë¡œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.  
> > ë”°ë¼ì„œ ê³ ìœ  IDë¥¼ ë”°ë¡œ ê´€ë¦¬í•  í•„ìš”ê°€ ì—†ê³  ë¡œì§ì˜ ì–‘ì´ ì¤„ì–´ë“¤ì—ˆìŠµë‹ˆë‹¤.

<details>
  <summary>ì½”ë“œë³´ê¸°</summary>

```tsx
const ReadSchedule = () => {
  const { readDocumentsSimplePaged } = useFirestoreRead("schedules")

  const { data, isLoading, isFetching, refetch } = useDataQuery<ReadDocumentType<SchedulesType>[], Error, ReadDocumentType<SchedulesType>[]>(
    "schedules",
    ()=> readDocumentsSimplePaged<SchedulesType>([], "authorizationId", "in", [accountId], "startTime", "desc", true, Infinity),
    (data) => data,
    {
      staleTime: Infinity,
      gcTime: Infinity,
    },
  )
  return { data, isLoading, isFetching, refetch }
}
```

</details>

---

<br/>

### Firebase ì¿¼ë¦¬ ì—°ì‚°ìì˜ í•œê³„

> `What?`
>
> í‚¤ì›Œë“œë¥¼ ê²€ìƒ‰í•˜ëŠ” ê³¼ì •ì—ì„œ  
> Firebaseì—ì„œëŠ” ë¬¸ì„œì˜ ì „ì²´ í…ìŠ¤íŠ¸ ê²€ìƒ‰ì„ ìì²´ì ìœ¼ë¡œ ì§€ì›í•˜ì§€ëŠ” ì•Šê³  ìˆê¸° ë•Œë¬¸ì—  
> ì •í™•í•œ í‚¤ì›Œë“œë¥¼ ê²€ìƒ‰í•˜ì§€ ì•ŠëŠ”ì´ìƒ ì›í•˜ëŠ” ê²€ìƒ‰ê²°ê³¼ê°€ ë…¸ì¶œë˜ì§€ ì•ŠëŠ” ì´ìŠˆê°€ ìˆì—ˆìŠµë‹ˆë‹¤.

> `How?`
>
> ê²€ìƒ‰ì–´ë¥¼ ë‹¤ì–‘í•œ ì¡°ê°ìœ¼ë¡œ ë¶„í•´í•˜ê³  ì¡°í•©í•œ í›„,  
> ì´ë¥¼ ê²€ìƒ‰ìš© í•„ë“œì— ë°°ì—´ë¡œ ì €ì¥í•˜ì—¬    
> ê²€ìƒ‰ ì‹œ í•´ë‹¹ í•„ë“œë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì¿¼ë¦¬í•˜ì—¬ ì •í™•í•œ ê²€ìƒ‰ ê²°ê³¼ë¥¼ ì œê³µí•˜ë„ë¡ í–ˆìŠµë‹ˆë‹¤.

<details>
  <summary>ì½”ë“œë³´ê¸°</summary>

- `generateKeywordCombinations`  
ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì€ ë¬¸ìì—´ë¡œ ì´ì¤‘ ë£¨í”„ë¥¼ í†µí•´ ëª¨ë“  ê°€ëŠ¥í•œ ë¶€ë¶„ ë¬¸ìì—´ ì¡°í•©ì„ ìƒì„±í•˜ì—¬ ë°°ì—´ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤.

```tsx
const generateKeywordCombinations = (inputString: string): string[] => {
  const inputArray: string[] = inputString.split(""); 
  const combinations: string[] = []; 

  for (let i = 0; i < inputArray.length; i++) {
    let substring: string = "";
    for (let j = i; j < inputArray.length; j++) {
      substring += inputArray[j];
      if (substring.trim() !== "" && !substring.startsWith(" ")) {
        combinations.push(substring);
      }
    }
  }

  return combinations;
};

export default generateKeywordCombinations;
```

```tsx
import useFirestoreUpdate from "@/hooks/useFirestoreUpdate";

  const UpdateUser = ( 
    data: { 
      accountName: string, 
      description: string 
    },
  ) => {

  const { updateField } = useFirestoreUpdate("users")

    updateField(accountId, {
      description: data.description,
      accountName: data.accountName,
      accountNameKeywords: generateKeywordCombinations(data.accountName)
    })
  }
```

</details>
